(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[610],{3525:function(e,s,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/ai-dashboard",function(){return l(5113)}])},5113:function(e,s,l){"use strict";l.r(s),l.d(s,{default:function(){return c}});var a=l(5893),t=l(7294),d=l(9008),i=l.n(d),n=l(1664),r=l.n(n);function c(){let[e,s]=(0,t.useState)("overview"),[l,d]=(0,t.useState)(null),[n,c]=(0,t.useState)([]),[o,x]=(0,t.useState)(null),[m,h]=(0,t.useState)(!1),[u,b]=(0,t.useState)("");(0,t.useEffect)(()=>{j();let e=setInterval(j,3e4);return()=>clearInterval(e)},[]);let j=async()=>{try{let e=await fetch("https://pipeline-orchestrator.jhaladik.workers.dev");if(e.ok){let s=await e.json();d(s)}let s=await fetch("https://rss-collect.jhaladik.workers.dev");s.ok&&(await s.json(),c([{id:"praha4",name:"Praha 4 Official",url:"https://www.praha4.cz/rss",enabled:!0,last_fetched:Date.now(),fetch_count:45,error_count:2},{id:"praha2",name:"Praha 2 Official",url:"https://www.praha2.cz/rss",enabled:!0,last_fetched:Date.now(),fetch_count:38,error_count:1},{id:"dpp",name:"Prague Public Transport",url:"https://www.dpp.cz/rss",enabled:!0,last_fetched:Date.now(),fetch_count:52,error_count:0},{id:"weather",name:"Prague Weather",url:"https://api.openweathermap.org/data/2.5/weather?q=Prague",enabled:!0,last_fetched:Date.now(),fetch_count:28,error_count:3}]));let l=await fetch("https://ai-data-score.jhaladik.workers.dev");if(l.ok){let e=await l.json();x(e)}}catch(e){b("❌ Chyba při nač\xedt\xe1n\xed dat")}},p=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"full";h(!0);try{let s=await fetch("https://pipeline-orchestrator.jhaladik.workers.dev",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({mode:e})});if(s.ok){let l=await s.json();b("✅ Pipeline ".concat(e," spuštěn: Run ID ").concat(l.pipeline_run_id)),await j()}else b("❌ Chyba při spouštěn\xed pipeline")}catch(e){b("❌ S\xedťov\xe1 chyba")}h(!1)},g=async()=>{h(!0);try{let e=await fetch("https://rss-collect.jhaladik.workers.dev",{method:"POST"});if(e.ok){let s=await e.json();b("✅ RSS collection: ".concat(s.collected," items from ").concat(s.sources.success," sources")),await j()}else b("❌ Chyba při RSS collection")}catch(e){b("❌ S\xedťov\xe1 chyba")}h(!1)},N=async()=>{h(!0);try{let e=await fetch("https://ai-data-score.jhaladik.workers.dev",{method:"POST"});if(e.ok){let s=await e.json();b("✅ AI Scoring: ".concat(s.qualified,"/").concat(s.processed," items qualified")),await j()}else b("❌ Chyba při AI scoring")}catch(e){b("❌ S\xedťov\xe1 chyba")}h(!1)},f=e=>{let s=(Date.now()-e.last_fetched)/36e5,l=e.error_count/Math.max(e.fetch_count,1);return e.enabled?s>24?{color:"text-red-500",status:"Neaktivn\xed"}:l>.1?{color:"text-yellow-500",status:"Probl\xe9my"}:{color:"text-green-500",status:"OK"}:{color:"text-gray-500",status:"Zak\xe1z\xe1no"}},v=e=>e<1e3?"".concat(e,"ms"):"".concat((e/1e3).toFixed(1),"s"),y=e=>new Date(e).toLocaleString("cs-CZ");return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i(),{children:(0,a.jsx)("title",{children:"AI Dashboard - Phase 2b RSS Pipeline"})}),(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)("header",{className:"bg-white shadow",children:(0,a.jsx)("div",{className:"container mx-auto px-4 py-6",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"\uD83E\uDD16 AI Dashboard - Phase 2b"}),(0,a.jsx)("p",{className:"text-gray-600",children:"RSS Pipeline & AI Content Management"})]}),(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsx)("button",{onClick:()=>p("full"),disabled:m,className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 disabled:opacity-50",children:"\uD83D\uDD04 Full Pipeline"}),(0,a.jsx)(r(),{href:"/admin/dashboard",className:"px-4 py-2 bg-gray-600 text-white rounded hover:bg-gray-700",children:"\uD83D\uDCCB Review Queue"}),(0,a.jsx)(r(),{href:"/admin/rss-management",className:"px-4 py-2 bg-orange-600 text-white rounded hover:bg-orange-700",children:"\uD83D\uDCE1 RSS Management"}),(0,a.jsx)(r(),{href:"/",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"\uD83C\uDFE0 Domů"})]})]})})}),(0,a.jsxs)("div",{className:"container mx-auto px-4 py-4",children:[u&&(0,a.jsx)("div",{className:"mb-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:u}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,a.jsx)("div",{className:"flex border-b",children:[{id:"overview",label:"\uD83D\uDCCA Přehled",icon:"\uD83D\uDCCA"},{id:"rss",label:"\uD83D\uDCE1 RSS Sources",icon:"\uD83D\uDCE1"},{id:"scoring",label:"\uD83C\uDFAF AI Scoring",icon:"\uD83C\uDFAF"},{id:"generation",label:"\uD83E\uDD16 Generation",icon:"\uD83E\uDD16"},{id:"pipeline",label:"\uD83D\uDD04 Pipeline",icon:"\uD83D\uDD04"}].map(l=>(0,a.jsx)("button",{onClick:()=>s(l.id),className:"px-6 py-3 font-medium ".concat(e===l.id?"border-b-2 border-blue-500 text-blue-600":"text-gray-500 hover:text-gray-700"),children:l.label},l.id))}),(0,a.jsxs)("div",{className:"p-6",children:["overview"===e&&(0,a.jsxs)("div",{className:"space-y-6",children:[l&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[(0,a.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:l.collected}),(0,a.jsx)("div",{className:"text-sm text-blue-700",children:"RSS Collected"})]}),(0,a.jsxs)("div",{className:"bg-purple-50 p-4 rounded-lg border border-purple-200",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:l.scored}),(0,a.jsx)("div",{className:"text-sm text-purple-700",children:"AI Scored"})]}),(0,a.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg border border-green-200",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-green-600",children:l.generated}),(0,a.jsx)("div",{className:"text-sm text-green-700",children:"Generated"})]}),(0,a.jsxs)("div",{className:"bg-yellow-50 p-4 rounded-lg border border-yellow-200",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-yellow-600",children:l.validated}),(0,a.jsx)("div",{className:"text-sm text-yellow-700",children:"Validated"})]}),(0,a.jsxs)("div",{className:"bg-orange-50 p-4 rounded-lg border border-orange-200",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-orange-600",children:l.published}),(0,a.jsx)("div",{className:"text-sm text-orange-700",children:"Published"})]})]}),(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,a.jsx)("h3",{className:"font-semibold mb-3",children:"\uD83D\uDD04 Last Pipeline Run"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Run ID:"}),(0,a.jsx)("span",{className:"ml-2 font-mono",children:l.pipeline_run_id})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Completed:"}),(0,a.jsx)("span",{className:"ml-2",children:y(l.completed_at)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Duration:"}),(0,a.jsx)("span",{className:"ml-2 font-medium",children:v(l.duration_ms)})]})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("button",{onClick:()=>p("collect"),disabled:m,className:"p-4 border border-blue-200 rounded-lg hover:bg-blue-50 disabled:opacity-50",children:[(0,a.jsx)("div",{className:"text-2xl mb-2",children:"\uD83D\uDCE1"}),(0,a.jsx)("div",{className:"font-medium",children:"Collect RSS"}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Collect from all sources"})]}),(0,a.jsxs)("button",{onClick:N,disabled:m,className:"p-4 border border-purple-200 rounded-lg hover:bg-purple-50 disabled:opacity-50",children:[(0,a.jsx)("div",{className:"text-2xl mb-2",children:"\uD83C\uDFAF"}),(0,a.jsx)("div",{className:"font-medium",children:"Run AI Scoring"}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Score unprocessed content"})]}),(0,a.jsxs)("button",{onClick:()=>p("generate"),disabled:m,className:"p-4 border border-green-200 rounded-lg hover:bg-green-50 disabled:opacity-50",children:[(0,a.jsx)("div",{className:"text-2xl mb-2",children:"\uD83E\uDD16"}),(0,a.jsx)("div",{className:"font-medium",children:"Generate Content"}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Generate from qualified items"})]})]})]}),"rss"===e&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold",children:"RSS Sources Status"}),(0,a.jsx)("button",{onClick:g,disabled:m,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50",children:"\uD83D\uDCE1 Collect Now"})]}),(0,a.jsx)("div",{className:"grid gap-4",children:n.map(e=>{let s=f(e);return(0,a.jsx)("div",{className:"border rounded-lg p-4",children:(0,a.jsx)("div",{className:"flex justify-between items-start",children:(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,a.jsx)("h4",{className:"font-medium text-lg",children:e.name}),(0,a.jsx)("span",{className:"px-2 py-1 text-xs rounded ".concat(s.color," bg-gray-100"),children:s.status}),!e.enabled&&(0,a.jsx)("span",{className:"px-2 py-1 text-xs rounded bg-gray-200 text-gray-600",children:"Disabled"})]}),(0,a.jsx)("div",{className:"text-sm text-gray-600 mb-3",children:e.url}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Fetch Count:"}),(0,a.jsx)("span",{className:"ml-2 font-medium",children:e.fetch_count})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Errors:"}),(0,a.jsx)("span",{className:"ml-2 font-medium text-red-600",children:e.error_count})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Last Fetch:"}),(0,a.jsx)("span",{className:"ml-2 font-medium",children:e.last_fetched?y(e.last_fetched):"Never"})]})]})]})})},e.id)})})]}),"scoring"===e&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold",children:"AI Scoring Performance"}),(0,a.jsx)("button",{onClick:N,disabled:m,className:"px-4 py-2 bg-purple-600 text-white rounded hover:bg-purple-700 disabled:opacity-50",children:"\uD83C\uDFAF Score Content"})]}),o&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:o.processed}),(0,a.jsx)("div",{className:"text-sm text-blue-700",children:"Items Processed"})]}),(0,a.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg border border-green-200",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-green-600",children:o.qualified}),(0,a.jsx)("div",{className:"text-sm text-green-700",children:"Qualified (≥60%)"})]}),(0,a.jsxs)("div",{className:"bg-purple-50 p-4 rounded-lg border border-purple-200",children:[(0,a.jsxs)("div",{className:"text-2xl font-bold text-purple-600",children:[Math.round(100*o.qualification_rate),"%"]}),(0,a.jsx)("div",{className:"text-sm text-purple-700",children:"Qualification Rate"})]})]}),o.categories&&(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,a.jsx)("h4",{className:"font-semibold mb-3",children:"Category Distribution"}),(0,a.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:Object.entries(o.categories).map(e=>{let[s,l]=e;return(0,a.jsxs)("div",{className:"text-center p-2 bg-white rounded border",children:[(0,a.jsx)("div",{className:"font-bold text-lg",children:l}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:s})]},s)})})]})]})]}),"generation"===e&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold",children:"AI Content Generation"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,a.jsx)("h4",{className:"font-medium mb-3",children:"\uD83E\uDD16 Generation Settings"}),(0,a.jsxs)("div",{className:"space-y-3 text-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{children:"Model:"}),(0,a.jsx)("span",{className:"font-medium",children:"claude-sonnet-4-20250514"})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{children:"Confidence Threshold:"}),(0,a.jsx)("span",{className:"font-medium",children:"0.85"})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{children:"RSS Qualification:"}),(0,a.jsx)("span",{className:"font-medium",children:"0.6"})]})]})]}),(0,a.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,a.jsx)("h4",{className:"font-medium mb-3",children:"\uD83D\uDCCA Generation Stats"}),(0,a.jsxs)("div",{className:"space-y-3 text-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{children:"Generated Today:"}),(0,a.jsx)("span",{className:"font-medium",children:(null==l?void 0:l.generated)||0})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{children:"Validated Today:"}),(0,a.jsx)("span",{className:"font-medium",children:(null==l?void 0:l.validated)||0})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{children:"Published Today:"}),(0,a.jsx)("span",{className:"font-medium",children:(null==l?void 0:l.published)||0})]})]})]})]}),(0,a.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,a.jsx)("h4",{className:"font-medium mb-3",children:"⚡ Quick Actions"}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("button",{onClick:()=>p("generate"),disabled:m,className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 disabled:opacity-50",children:"\uD83E\uDD16 Generate Content"}),(0,a.jsx)("button",{onClick:()=>p("validate"),disabled:m,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50",children:"\uD83D\uDD0D Validate Content"}),(0,a.jsx)("button",{onClick:()=>p("publish"),disabled:m,className:"px-4 py-2 bg-purple-600 text-white rounded hover:bg-purple-700 disabled:opacity-50",children:"\uD83D\uDCF0 Auto-Publish"})]})]})]}),"pipeline"===e&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold",children:"Pipeline Management"}),(0,a.jsx)("div",{className:"flex gap-2",children:(0,a.jsx)("button",{onClick:()=>p("full"),disabled:m,className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 disabled:opacity-50",children:"\uD83D\uDD04 Full Pipeline"})})]}),l&&(0,a.jsxs)("div",{className:"border rounded-lg p-6",children:[(0,a.jsx)("h4",{className:"font-medium mb-4",children:"\uD83D\uDCCA Pipeline Flow Visualization"}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center text-blue-600 font-bold text-lg mb-2",children:l.collected}),(0,a.jsx)("div",{className:"text-sm font-medium",children:"RSS Collect"})]}),(0,a.jsx)("div",{className:"flex-1 h-0.5 bg-gray-300 mx-4"}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center text-purple-600 font-bold text-lg mb-2",children:l.scored}),(0,a.jsx)("div",{className:"text-sm font-medium",children:"AI Score"})]}),(0,a.jsx)("div",{className:"flex-1 h-0.5 bg-gray-300 mx-4"}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center text-green-600 font-bold text-lg mb-2",children:l.generated}),(0,a.jsx)("div",{className:"text-sm font-medium",children:"Generate"})]}),(0,a.jsx)("div",{className:"flex-1 h-0.5 bg-gray-300 mx-4"}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-yellow-100 rounded-full flex items-center justify-center text-yellow-600 font-bold text-lg mb-2",children:l.validated}),(0,a.jsx)("div",{className:"text-sm font-medium",children:"Validate"})]}),(0,a.jsx)("div",{className:"flex-1 h-0.5 bg-gray-300 mx-4"}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-orange-100 rounded-full flex items-center justify-center text-orange-600 font-bold text-lg mb-2",children:l.published}),(0,a.jsx)("div",{className:"text-sm font-medium",children:"Publish"})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,a.jsx)("h4",{className:"font-medium mb-3",children:"⚙️ Pipeline Configuration"}),(0,a.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{children:"Schedule:"}),(0,a.jsx)("span",{className:"font-medium",children:"3x daily (8 AM, 2 PM, 8 PM)"})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{children:"Auto-approval:"}),(0,a.jsx)("span",{className:"font-medium",children:"≥85% confidence"})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{children:"RSS threshold:"}),(0,a.jsx)("span",{className:"font-medium",children:"≥60% relevance"})]})]})]}),(0,a.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,a.jsx)("h4",{className:"font-medium mb-3",children:"\uD83D\uDCC8 Performance Metrics"}),(0,a.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{children:"Success Rate:"}),(0,a.jsx)("span",{className:"font-medium text-green-600",children:"96%"})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{children:"Avg Duration:"}),(0,a.jsx)("span",{className:"font-medium",children:l?v(l.duration_ms):"N/A"})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{children:"Last Run:"}),(0,a.jsx)("span",{className:"font-medium",children:l?y(l.completed_at):"N/A"})]})]})]})]})]})]})]})]})]})]})}}},function(e){e.O(0,[996,888,774,179],function(){return e(e.s=3525)}),_N_E=e.O()}]);