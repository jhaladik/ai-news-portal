(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[459],{3236:function(e,s,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/login",function(){return a(4070)}])},4070:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return m}});var r=a(5893),t=a(7294),l=a(1163),n=a(1664),i=a.n(n),d=a(6904),o=a(5568),c=a(5577);function m(){let e=(0,l.useRouter)(),[s,a]=(0,t.useState)({email:"",password:""}),[n,m]=(0,t.useState)(!1),[x,u]=(0,t.useState)(""),[h,p]=(0,t.useState)(!1);(0,t.useEffect)(()=>{o.E5.isAuthenticated()&&(o.E5.isAdmin()?e.push("/admin"):e.push("/dashboard"))},[]);let g=e=>{let{name:s,value:r}=e.target;a(e=>({...e,[s]:r})),u("")},b=async a=>{a.preventDefault(),m(!0),u("");try{let a=await c.Z.login({email:s.email,password:s.password});a.success&&a.token&&a.user?(o.E5.login(a.token,a.user),"admin"===a.user.role?e.push("/admin"):e.push("/dashboard")):u("Login failed. Please try again.")}catch(e){console.error("Login error:",e),u("Login failed. Please check your credentials and try again.")}finally{m(!1)}},f=async a=>{a.preventDefault(),m(!0),u("");try{let a=await fetch("https://auth-register.jhaladik.workers.dev",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:s.email,password:s.password,neighborhood_id:"vinohrady"})}),r=await a.json();if(a.ok){let a=await c.Z.login({email:s.email,password:s.password});a.token&&a.user&&(o.E5.login(a.token,a.user),e.push("/dashboard"))}else u(r.error||"Registration failed. Please try again.")}catch(e){u("Network error. Please check your connection and try again.")}finally{m(!1)}};return(0,r.jsx)(d.ZP,{showFooter:!1,children:(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[(0,r.jsx)("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("h1",{className:"text-4xl font-bold text-blue-600 mb-2",children:"\uD83C\uDFD9️ Praha Local News"}),(0,r.jsx)("h2",{className:"text-xl text-gray-900",children:h?"Create Your Account":"Welcome Back"}),(0,r.jsx)("p",{className:"mt-2 text-sm text-gray-600",children:h?"Join thousands of neighbors getting AI-curated local news":"Sign in to your personalized news dashboard"})]})}),(0,r.jsxs)("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:[(0,r.jsxs)("div",{className:"bg-white py-8 px-4 shadow-lg sm:rounded-lg sm:px-10 border",children:[(0,r.jsxs)("form",{onSubmit:h?f:b,className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email address"}),(0,r.jsx)("div",{className:"mt-1",children:(0,r.jsx)("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:s.email,onChange:g,className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"your.email@example.com"})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),(0,r.jsx)("div",{className:"mt-1",children:(0,r.jsx)("input",{id:"password",name:"password",type:"password",autoComplete:h?"new-password":"current-password",required:!0,value:s.password,onChange:g,className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:h?"Create a strong password":"Enter your password"})})]}),x&&(0,r.jsx)("div",{className:"rounded-md bg-red-50 p-4 border border-red-200",children:(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)("span",{className:"text-red-400",children:"⚠️"})}),(0,r.jsx)("div",{className:"ml-3",children:(0,r.jsx)("h3",{className:"text-sm font-medium text-red-800",children:x})})]})}),(0,r.jsx)("div",{children:(0,r.jsx)("button",{type:"submit",disabled:n,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:n?(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),h?"Creating Account...":"Signing In..."]}):h?"Create Account":"Sign In"})})]}),(0,r.jsxs)("div",{className:"mt-6",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,r.jsx)("div",{className:"w-full border-t border-gray-300"})}),(0,r.jsx)("div",{className:"relative flex justify-center text-sm",children:(0,r.jsx)("span",{className:"px-2 bg-white text-gray-500",children:h?"Already have an account?":"Don&apos;t have an account?"})})]}),(0,r.jsx)("div",{className:"mt-6",children:(0,r.jsx)("button",{type:"button",onClick:()=>{p(!h),u(""),a({email:"",password:""})},className:"w-full text-center text-sm text-blue-600 hover:text-blue-500 font-medium",children:h?"Sign in to existing account":"Create a new account"})})]}),(0,r.jsxs)("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg border border-gray-200",children:[(0,r.jsx)("h4",{className:"text-xs font-semibold text-gray-700 mb-2",children:"Demo Credentials:"}),(0,r.jsxs)("div",{className:"text-xs text-gray-600 space-y-1",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("strong",{children:"Admin:"})," admin@praha.local / admin123"]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("strong",{children:"User:"})," user@praha.local / user123"]})]})]})]}),(0,r.jsx)("div",{className:"mt-6 text-center",children:(0,r.jsx)(i(),{href:"/",className:"text-sm text-blue-600 hover:text-blue-500",children:"← Back to news feed"})})]}),(0,r.jsxs)("div",{className:"mt-12 max-w-3xl mx-auto px-4",children:[(0,r.jsx)("div",{className:"text-center mb-8",children:(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Why join Praha Local News?"})}),(0,r.jsxs)("div",{className:"grid md:grid-cols-3 gap-6",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-3xl mb-3",children:"\uD83E\uDD16"}),(0,r.jsx)("h4",{className:"font-semibold text-gray-900",children:"AI-Curated"}),(0,r.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Smart algorithms filter through hundreds of sources to bring you only relevant local news"})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-3xl mb-3",children:"\uD83D\uDCCD"}),(0,r.jsx)("h4",{className:"font-semibold text-gray-900",children:"Hyperlocal"}),(0,r.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"News specifically for your Prague neighborhood - never miss what affects you"})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-3xl mb-3",children:"\uD83D\uDCE7"}),(0,r.jsx)("h4",{className:"font-semibold text-gray-900",children:"Personalized"}),(0,r.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Daily newsletters tailored to your interests and delivery preferences"})]})]})]})]})})}}},function(e){e.O(0,[424,904,888,774,179],function(){return e(e.s=3236)}),_N_E=e.O()}]);