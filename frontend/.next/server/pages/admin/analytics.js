"use strict";(()=>{var e={};e.id=867,e.ids=[867,888,660],e.modules={8728:(e,s,t)=>{t.r(s),t.d(s,{config:()=>_,default:()=>b,getServerSideProps:()=>N,getStaticPaths:()=>j,getStaticProps:()=>v,reportWebVitals:()=>y,routeModule:()=>C,unstable_getServerProps:()=>S,unstable_getServerSideProps:()=>P,unstable_getStaticParams:()=>D,unstable_getStaticPaths:()=>w,unstable_getStaticProps:()=>f});var a={};t.r(a),t.d(a,{default:()=>p});var r=t(7093),l=t(5244),i=t(1323),n=t(2899),d=t.n(n),c=t(6814),o=t(997),x=t(6689),m=t(1163),g=t(115),h=t(3673),u=t(6055);function p(){(0,m.useRouter)();let[e,s]=(0,x.useState)(null),[t,a]=(0,x.useState)(!0),[r,l]=(0,x.useState)("7d"),[i,n]=(0,x.useState)("all"),d=new h.El,c=async()=>{try{let e=d.getCurrentToken();if(!e)return;a(!0);let t=await u.Z.getAdminAnalytics(e,r,"all"===i?void 0:i),l={overview:{total_content:t.content.published_content||0,published_today:t.trends.length>0?t.trends[t.trends.length-1].content_published:0,active_subscribers:t.users.active_users||0,newsletter_open_rate:t.newsletters.avg_open_rate||0,avg_ai_confidence:t.content.ai_confidence_avg||0,pipeline_success_rate:1-(t.content.rejection_rate||0)},content_metrics:{by_category:t.content.by_category?.map(e=>({category:e.category,count:e.count,avg_confidence:e.avg_confidence}))||[],by_neighborhood:t.neighborhoods?.map(e=>({neighborhood:e.neighborhood_name,count:e.content_published,subscribers:e.user_count}))||[],by_source:[]},user_engagement:{newsletter_stats:{sent:t.newsletters.total_sent||0,opened:Math.round((t.newsletters.total_sent||0)*(t.newsletters.avg_open_rate||0)),clicked:Math.round((t.newsletters.total_sent||0)*(t.newsletters.avg_click_rate||0)),unsubscribed:0},top_content:[],subscriber_growth:t.trends?.map(e=>({date:e.date,count:e.users_active}))||[]},pipeline_performance:{daily_stats:t.trends?.map(e=>({date:e.date,collected:e.content_published,generated:e.content_published,published:e.content_published}))||[],processing_times:{avg_collection:30,avg_scoring:15,avg_generation:45,avg_validation:20},error_rates:{collection_errors:0,ai_failures:0,validation_failures:0}}};s(l)}catch(e){console.error("Failed to fetch analytics:",e)}finally{a(!1)}},p=e=>e>=1e6?(e/1e6).toFixed(1)+"M":e>=1e3?(e/1e3).toFixed(1)+"K":e.toString(),b=e=>Math.round(100*e)+"%";return t?o.jsx(g.ZP,{children:o.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,o.jsxs)("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),o.jsx("p",{className:"text-gray-600",children:"Loading analytics..."})]})})}):e?o.jsx(g.ZP,{children:o.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,o.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,o.jsxs)("div",{className:"mb-8",children:[o.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"\uD83D\uDCCA Analytics Dashboard"}),o.jsx("p",{className:"mt-2 text-gray-600",children:"Comprehensive insights into your AI news platform performance"})]}),(0,o.jsxs)("div",{className:"mb-8 flex flex-wrap gap-4",children:[(0,o.jsxs)("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Time Range"}),(0,o.jsxs)("select",{value:r,onChange:e=>l(e.target.value),className:"border border-gray-300 rounded-md px-3 py-2 bg-white",children:[o.jsx("option",{value:"1d",children:"Last 24 Hours"}),o.jsx("option",{value:"7d",children:"Last 7 Days"}),o.jsx("option",{value:"30d",children:"Last 30 Days"}),o.jsx("option",{value:"90d",children:"Last 90 Days"})]})]}),(0,o.jsxs)("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Neighborhood"}),(0,o.jsxs)("select",{value:i,onChange:e=>n(e.target.value),className:"border border-gray-300 rounded-md px-3 py-2 bg-white",children:[o.jsx("option",{value:"all",children:"All Neighborhoods"}),o.jsx("option",{value:"vinohrady",children:"Vinohrady"}),o.jsx("option",{value:"karlin",children:"Karl\xedn"}),o.jsx("option",{value:"smichov",children:"Sm\xedchov"}),o.jsx("option",{value:"nove_mesto",children:"Nov\xe9 Město"})]})]})]}),(0,o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:[o.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsxs)("div",{children:[o.jsx("p",{className:"text-sm text-gray-600",children:"Total Content"}),o.jsx("p",{className:"text-2xl font-bold",children:p(e.overview.total_content)})]}),o.jsx("div",{className:"text-3xl",children:"\uD83D\uDCF0"})]})}),o.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsxs)("div",{children:[o.jsx("p",{className:"text-sm text-gray-600",children:"Published Today"}),o.jsx("p",{className:"text-2xl font-bold text-green-600",children:e.overview.published_today})]}),o.jsx("div",{className:"text-3xl",children:"✅"})]})}),o.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsxs)("div",{children:[o.jsx("p",{className:"text-sm text-gray-600",children:"Active Subscribers"}),o.jsx("p",{className:"text-2xl font-bold text-blue-600",children:p(e.overview.active_subscribers)})]}),o.jsx("div",{className:"text-3xl",children:"\uD83D\uDC65"})]})}),o.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsxs)("div",{children:[o.jsx("p",{className:"text-sm text-gray-600",children:"Newsletter Open Rate"}),o.jsx("p",{className:"text-2xl font-bold text-purple-600",children:b(e.overview.newsletter_open_rate)})]}),o.jsx("div",{className:"text-3xl",children:"\uD83D\uDCE7"})]})}),o.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsxs)("div",{children:[o.jsx("p",{className:"text-sm text-gray-600",children:"Avg AI Confidence"}),o.jsx("p",{className:"text-2xl font-bold text-orange-600",children:b(e.overview.avg_ai_confidence)})]}),o.jsx("div",{className:"text-3xl",children:"\uD83E\uDD16"})]})}),o.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsxs)("div",{children:[o.jsx("p",{className:"text-sm text-gray-600",children:"Pipeline Success"}),o.jsx("p",{className:"text-2xl font-bold text-emerald-600",children:b(e.overview.pipeline_success_rate)})]}),o.jsx("div",{className:"text-3xl",children:"⚙️"})]})})]}),(0,o.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8",children:[(0,o.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"\uD83D\uDCCA Content by Category"}),o.jsx("div",{className:"space-y-4",children:e.content_metrics.by_category.map(e=>(0,o.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,o.jsxs)("div",{children:[o.jsx("p",{className:"font-medium capitalize",children:e.category.replace("_"," ")}),(0,o.jsxs)("p",{className:"text-sm text-gray-600",children:["Confidence: ",b(e.avg_confidence)]})]}),o.jsx("div",{className:"text-lg font-bold text-blue-600",children:e.count})]},e.category))})]}),(0,o.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"\uD83C\uDFD8️ Content by Neighborhood"}),o.jsx("div",{className:"space-y-4",children:e.content_metrics.by_neighborhood.map(e=>(0,o.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,o.jsxs)("div",{children:[o.jsx("p",{className:"font-medium",children:e.neighborhood}),(0,o.jsxs)("p",{className:"text-sm text-gray-600",children:[e.subscribers," subscribers"]})]}),o.jsx("div",{className:"text-lg font-bold text-green-600",children:e.count})]},e.neighborhood))})]})]}),(0,o.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm border mb-8",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"\uD83D\uDCE7 Newsletter Performance"}),(0,o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,o.jsxs)("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[o.jsx("div",{className:"text-2xl font-bold text-blue-600",children:p(e.user_engagement.newsletter_stats.sent)}),o.jsx("div",{className:"text-sm text-gray-600",children:"Sent"})]}),(0,o.jsxs)("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[o.jsx("div",{className:"text-2xl font-bold text-green-600",children:p(e.user_engagement.newsletter_stats.opened)}),o.jsx("div",{className:"text-sm text-gray-600",children:"Opened"})]}),(0,o.jsxs)("div",{className:"text-center p-4 bg-purple-50 rounded-lg",children:[o.jsx("div",{className:"text-2xl font-bold text-purple-600",children:p(e.user_engagement.newsletter_stats.clicked)}),o.jsx("div",{className:"text-sm text-gray-600",children:"Clicked"})]}),(0,o.jsxs)("div",{className:"text-center p-4 bg-red-50 rounded-lg",children:[o.jsx("div",{className:"text-2xl font-bold text-red-600",children:p(e.user_engagement.newsletter_stats.unsubscribed)}),o.jsx("div",{className:"text-sm text-gray-600",children:"Unsubscribed"})]})]})]}),(0,o.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"⚙️ Pipeline Performance"}),(0,o.jsxs)("div",{className:"mb-6",children:[o.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Average Processing Times"}),(0,o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,o.jsxs)("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[(0,o.jsxs)("div",{className:"text-lg font-semibold",children:[e.pipeline_performance.processing_times.avg_collection,"s"]}),o.jsx("div",{className:"text-sm text-gray-600",children:"Collection"})]}),(0,o.jsxs)("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[(0,o.jsxs)("div",{className:"text-lg font-semibold",children:[e.pipeline_performance.processing_times.avg_scoring,"s"]}),o.jsx("div",{className:"text-sm text-gray-600",children:"Scoring"})]}),(0,o.jsxs)("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[(0,o.jsxs)("div",{className:"text-lg font-semibold",children:[e.pipeline_performance.processing_times.avg_generation,"s"]}),o.jsx("div",{className:"text-sm text-gray-600",children:"Generation"})]}),(0,o.jsxs)("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[(0,o.jsxs)("div",{className:"text-lg font-semibold",children:[e.pipeline_performance.processing_times.avg_validation,"s"]}),o.jsx("div",{className:"text-sm text-gray-600",children:"Validation"})]})]})]}),(0,o.jsxs)("div",{children:[o.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"\uD83D\uDCC8 Daily Pipeline Activity"}),o.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:o.jsx("div",{className:"flex items-end space-x-1 h-32",children:e.pipeline_performance.daily_stats.map(e=>(0,o.jsxs)("div",{className:"flex-1 flex flex-col items-center space-y-1",children:[o.jsx("div",{className:"bg-blue-400 w-full rounded-t",style:{height:`${Math.max(e.published/10*100,5)}%`,minHeight:"4px"},title:`${e.date}: ${e.published} published`}),o.jsx("div",{className:"text-xs text-gray-600 transform rotate-45 origin-bottom-left",children:e.date.split("-").slice(1).join("/")})]},e.date))})})]})]})]})})}):o.jsx(g.ZP,{children:o.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,o.jsxs)("div",{className:"text-center",children:[o.jsx("p",{className:"text-gray-600",children:"Failed to load analytics data"}),o.jsx("button",{onClick:c,className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Retry"})]})})})}let b=(0,i.l)(a,"default"),v=(0,i.l)(a,"getStaticProps"),j=(0,i.l)(a,"getStaticPaths"),N=(0,i.l)(a,"getServerSideProps"),_=(0,i.l)(a,"config"),y=(0,i.l)(a,"reportWebVitals"),f=(0,i.l)(a,"unstable_getStaticProps"),w=(0,i.l)(a,"unstable_getStaticPaths"),D=(0,i.l)(a,"unstable_getStaticParams"),S=(0,i.l)(a,"unstable_getServerProps"),P=(0,i.l)(a,"unstable_getServerSideProps"),C=new r.PagesRouteModule({definition:{kind:l.x.PAGES,page:"/admin/analytics",pathname:"/admin/analytics",bundlePath:"",filename:""},components:{App:c.default,Document:d()},userland:a})},2785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},6689:e=>{e.exports=require("react")},6405:e=>{e.exports=require("react-dom")},997:e=>{e.exports=require("react/jsx-runtime")},2048:e=>{e.exports=require("fs")},5315:e=>{e.exports=require("path")},6162:e=>{e.exports=require("stream")},1568:e=>{e.exports=require("zlib")}};var s=require("../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[899,342,814,115],()=>t(8728));module.exports=a})();