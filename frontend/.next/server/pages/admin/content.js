"use strict";(()=>{var e={};e.id=871,e.ids=[871,888,660],e.modules={4728:(e,t,s)=>{s.r(t),s.d(t,{config:()=>j,default:()=>b,getServerSideProps:()=>f,getStaticPaths:()=>v,getStaticProps:()=>y,reportWebVitals:()=>N,routeModule:()=>_,unstable_getServerProps:()=>k,unstable_getServerSideProps:()=>P,unstable_getStaticParams:()=>S,unstable_getStaticPaths:()=>C,unstable_getStaticProps:()=>w});var l={};s.r(l),s.d(l,{default:()=>p});var r=s(7093),a=s(5244),n=s(1323),i=s(2899),d=s.n(i),o=s(6814),c=s(997),x=s(6689),u=s(1163),m=s(115),g=s(3673),h=s(6055);function p(){(0,u.useRouter)();let[e,t]=(0,x.useState)([]),[s,l]=(0,x.useState)(!0),[r,a]=(0,x.useState)("review"),[n,i]=(0,x.useState)({category:void 0,neighborhood:void 0,limit:50,offset:0}),[d,o]=(0,x.useState)(""),[p,b]=(0,x.useState)([]),[y,v]=(0,x.useState)(""),[f,j]=(0,x.useState)(null),[N,w]=(0,x.useState)(null),C=new g.El,S=async(e,s,l)=>{try{let r=C.getCurrentToken();if(!r)return;w(e),"approve"===s?(await h.Z.approveContent(r,e),t(t=>t.filter(t=>t.id!==e))):"reject"===s?(console.log(`Rejecting ${e} with reason: ${l}`),t(t=>t.filter(t=>t.id!==e))):"delete"===s&&(await h.Z.deleteContent(r,e),t(t=>t.filter(t=>t.id!==e)))}catch(e){console.error(`Failed to ${s} content:`,e)}finally{w(null)}},k=async()=>{if(y&&0!==p.length)try{let e=C.getCurrentToken();if(!e)return;w("bulk");let s=p.map(t=>"approve"===y?h.Z.approveContent(e,t):"delete"===y?h.Z.deleteContent(e,t):Promise.resolve());await Promise.all(s),t(e=>e.filter(e=>!p.includes(e.id))),b([]),v("")}catch(e){console.error("Bulk action failed:",e)}finally{w(null)}},P=e=>{b(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},_=e=>{let t=Math.floor((Date.now()-e)/1e3);return t<60?`${t}s ago`:t<3600?`${Math.floor(t/60)}m ago`:t<86400?`${Math.floor(t/3600)}h ago`:`${Math.floor(t/86400)}d ago`},A=e=>{switch(e){case"published":return"text-green-600 bg-green-100";case"review":return"text-yellow-600 bg-yellow-100";case"rejected":return"text-red-600 bg-red-100";case"draft":return"text-gray-600 bg-gray-100";default:return"text-blue-600 bg-blue-100"}},M=e=>{switch(e){case"emergency":return"text-red-600 bg-red-100";case"local":return"text-blue-600 bg-blue-100";case"business":return"text-green-600 bg-green-100";case"community":return"text-purple-600 bg-purple-100";case"events":return"text-orange-600 bg-orange-100";default:return"text-gray-600 bg-gray-100"}},$=e.filter(e=>e.title.toLowerCase().includes(d.toLowerCase())||e.content.toLowerCase().includes(d.toLowerCase()));return s?c.jsx(m.ZP,{children:c.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,c.jsxs)("div",{className:"text-center",children:[c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),c.jsx("p",{className:"text-gray-600",children:"Loading content..."})]})})}):(0,c.jsxs)(m.ZP,{children:[c.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,c.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,c.jsxs)("div",{className:"mb-8",children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"\uD83D\uDCDD Content Management"}),c.jsx("p",{className:"mt-2 text-gray-600",children:"Review, approve, and manage AI-generated content"})]}),(0,c.jsxs)("div",{className:"mb-6 space-y-4",children:[c.jsx("div",{className:"border-b border-gray-200",children:c.jsx("nav",{className:"-mb-px flex space-x-8",children:[{key:"review",label:"Pending Review",count:e.filter(e=>"review"===e.status).length},{key:"published",label:"Published",count:e.filter(e=>"published"===e.status).length},{key:"rejected",label:"Rejected",count:e.filter(e=>"rejected"===e.status).length},{key:"all",label:"All Content",count:e.length}].map(e=>(0,c.jsxs)("button",{onClick:()=>a(e.key),className:`py-2 px-1 border-b-2 font-medium text-sm ${r===e.key?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.label,c.jsx("span",{className:"ml-2 px-2 py-1 text-xs bg-gray-100 rounded-full",children:e.count})]},e.key))})}),(0,c.jsxs)("div",{className:"flex flex-wrap gap-4 items-center justify-between",children:[(0,c.jsxs)("div",{className:"flex gap-4 items-center",children:[c.jsx("input",{type:"text",placeholder:"Search content...",value:d,onChange:e=>o(e.target.value),className:"border border-gray-300 rounded-md px-3 py-2 w-64"}),(0,c.jsxs)("select",{value:n.category||"all",onChange:e=>i(t=>({...t,category:"all"===e.target.value?void 0:e.target.value})),className:"border border-gray-300 rounded-md px-3 py-2",children:[c.jsx("option",{value:"all",children:"All Categories"}),c.jsx("option",{value:"emergency",children:"Emergency"}),c.jsx("option",{value:"local",children:"Local"}),c.jsx("option",{value:"business",children:"Business"}),c.jsx("option",{value:"community",children:"Community"}),c.jsx("option",{value:"events",children:"Events"})]}),(0,c.jsxs)("select",{value:n.neighborhood||"all",onChange:e=>i(t=>({...t,neighborhood:"all"===e.target.value?void 0:e.target.value})),className:"border border-gray-300 rounded-md px-3 py-2",children:[c.jsx("option",{value:"all",children:"All Neighborhoods"}),c.jsx("option",{value:"vinohrady",children:"Vinohrady"}),c.jsx("option",{value:"karlin",children:"Karl\xedn"}),c.jsx("option",{value:"smichov",children:"Sm\xedchov"}),c.jsx("option",{value:"nove_mesto",children:"Nov\xe9 Město"})]})]}),p.length>0&&(0,c.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,c.jsxs)("span",{className:"text-sm text-gray-600",children:[p.length," selected"]}),(0,c.jsxs)("select",{value:y,onChange:e=>v(e.target.value),className:"border border-gray-300 rounded-md px-3 py-2 text-sm",children:[c.jsx("option",{value:"",children:"Bulk Actions"}),c.jsx("option",{value:"approve",children:"Approve Selected"}),c.jsx("option",{value:"delete",children:"Delete Selected"})]}),c.jsx("button",{onClick:k,disabled:!y||"bulk"===N,className:"px-3 py-2 bg-blue-600 text-white rounded-md text-sm hover:bg-blue-700 disabled:opacity-50",children:"bulk"===N?"Processing...":"Apply"})]})]})]}),(0,c.jsxs)("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:[c.jsx("div",{className:"px-6 py-3 border-b border-gray-200 bg-gray-50",children:(0,c.jsxs)("div",{className:"flex items-center",children:[c.jsx("input",{type:"checkbox",checked:p.length===$.length&&$.length>0,onChange:()=>{p.length===e.length?b([]):b(e.map(e=>e.id))},className:"h-4 w-4 text-blue-600 border-gray-300 rounded mr-4"}),(0,c.jsxs)("span",{className:"text-sm font-medium text-gray-900",children:[$.length," items"]})]})}),c.jsx("div",{className:"divide-y divide-gray-200",children:0===$.length?c.jsx("div",{className:"px-6 py-12 text-center",children:c.jsx("p",{className:"text-gray-500",children:"No content found matching your criteria."})}):$.map(e=>c.jsx("div",{className:"px-6 py-4 hover:bg-gray-50",children:(0,c.jsxs)("div",{className:"flex items-start space-x-4",children:[c.jsx("input",{type:"checkbox",checked:p.includes(e.id),onChange:()=>P(e.id),className:"h-4 w-4 text-blue-600 border-gray-300 rounded mt-1"}),c.jsx("div",{className:"flex-1 min-w-0",children:(0,c.jsxs)("div",{className:"flex items-start justify-between",children:[(0,c.jsxs)("div",{className:"flex-1",children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900 line-clamp-2",children:e.title}),c.jsx("p",{className:"mt-1 text-sm text-gray-600 line-clamp-3",children:e.content}),(0,c.jsxs)("div",{className:"mt-3 flex flex-wrap gap-2",children:[c.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${A(e.status)}`,children:e.status}),c.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${M(e.category)}`,children:e.category}),c.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium text-gray-600 bg-gray-100",children:e.neighborhood_name}),(0,c.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium text-purple-600 bg-purple-100",children:[Math.round(100*e.ai_confidence),"% confidence"]})]}),(0,c.jsxs)("div",{className:"mt-2 text-xs text-gray-500",children:["Created ",_(e.created_at),e.published_at&&(0,c.jsxs)("span",{children:[" • Published ",_(e.published_at)]})]})]}),(0,c.jsxs)("div",{className:"flex space-x-2 ml-4",children:["review"===e.status&&(0,c.jsxs)(c.Fragment,{children:[c.jsx("button",{onClick:()=>S(e.id,"approve"),disabled:N===e.id,className:"px-3 py-1 bg-green-600 text-white rounded text-sm hover:bg-green-700 disabled:opacity-50",children:N===e.id?"...":"Approve"}),c.jsx("button",{onClick:()=>S(e.id,"reject","Admin review"),disabled:N===e.id,className:"px-3 py-1 bg-red-600 text-white rounded text-sm hover:bg-red-700 disabled:opacity-50",children:N===e.id?"...":"Reject"})]}),c.jsx("button",{onClick:()=>j(e),className:"px-3 py-1 bg-blue-600 text-white rounded text-sm hover:bg-blue-700",children:"Edit"}),c.jsx("button",{onClick:()=>S(e.id,"delete"),disabled:N===e.id,className:"px-3 py-1 bg-gray-600 text-white rounded text-sm hover:bg-gray-700 disabled:opacity-50",children:"Delete"})]})]})})]})},e.id))})]}),(0,c.jsxs)("div",{className:"mt-6 flex items-center justify-between",children:[(0,c.jsxs)("p",{className:"text-sm text-gray-700",children:["Showing ",$.length," of ",e.length," results"]}),(0,c.jsxs)("div",{className:"flex space-x-2",children:[c.jsx("button",{onClick:()=>i(e=>({...e,offset:Math.max(0,(e.offset||0)-(e.limit||50))})),disabled:!n.offset,className:"px-3 py-2 border border-gray-300 rounded-md text-sm hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),c.jsx("button",{onClick:()=>i(e=>({...e,offset:(e.offset||0)+(e.limit||50)})),disabled:$.length<(n.limit||50),className:"px-3 py-2 border border-gray-300 rounded-md text-sm hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})]})}),f&&c.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center p-4 z-50",children:c.jsx("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-96 overflow-y-auto",children:(0,c.jsxs)("div",{className:"p-6",children:[(0,c.jsxs)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:["Edit Content: ",f.title]}),c.jsx("p",{className:"text-sm text-gray-600",children:"Content editing interface would go here. This would include fields for title, content, category, status, etc."}),(0,c.jsxs)("div",{className:"mt-6 flex justify-end space-x-3",children:[c.jsx("button",{onClick:()=>j(null),className:"px-4 py-2 border border-gray-300 rounded-md text-sm hover:bg-gray-50",children:"Close"}),c.jsx("button",{onClick:()=>j(null),className:"px-4 py-2 bg-blue-600 text-white rounded-md text-sm hover:bg-blue-700",children:"Save Changes"})]})]})})})]})}let b=(0,n.l)(l,"default"),y=(0,n.l)(l,"getStaticProps"),v=(0,n.l)(l,"getStaticPaths"),f=(0,n.l)(l,"getServerSideProps"),j=(0,n.l)(l,"config"),N=(0,n.l)(l,"reportWebVitals"),w=(0,n.l)(l,"unstable_getStaticProps"),C=(0,n.l)(l,"unstable_getStaticPaths"),S=(0,n.l)(l,"unstable_getStaticParams"),k=(0,n.l)(l,"unstable_getServerProps"),P=(0,n.l)(l,"unstable_getServerSideProps"),_=new r.PagesRouteModule({definition:{kind:a.x.PAGES,page:"/admin/content",pathname:"/admin/content",bundlePath:"",filename:""},components:{App:o.default,Document:d()},userland:l})},2785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},6689:e=>{e.exports=require("react")},6405:e=>{e.exports=require("react-dom")},997:e=>{e.exports=require("react/jsx-runtime")},2048:e=>{e.exports=require("fs")},5315:e=>{e.exports=require("path")},6162:e=>{e.exports=require("stream")},1568:e=>{e.exports=require("zlib")}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),l=t.X(0,[899,342,814,115],()=>s(4728));module.exports=l})();