(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[112],{8242:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/rss-management",function(){return t(8920)}])},8920:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return c}});var a=t(5893),l=t(7294),r=t(9008),d=t.n(r),i=t(1664),n=t.n(i);function c(){let[e,s]=(0,l.useState)([]),[t,r]=(0,l.useState)([]),[i,c]=(0,l.useState)([]),[o,x]=(0,l.useState)(null),[h,m]=(0,l.useState)(null),[u,b]=(0,l.useState)(null),[g,p]=(0,l.useState)(!1),[j,v]=(0,l.useState)(""),[y,N]=(0,l.useState)("sources"),[f,D]=(0,l.useState)({name:"",url:"",category_hint:"local_government"}),[w,k]=(0,l.useState)(!1);(0,l.useEffect)(()=>{C();let e=setInterval(C,3e4);return()=>clearInterval(e)},[w]);let C=async()=>{try{p(!0),v("");try{let e=await fetch("https://rss-sources-management.jhaladik.workers.dev");if(e.ok){let t=await e.json();s(Array.isArray(t.sources)?t.sources:[])}else throw Error("Sources API returned ".concat(e.status))}catch(e){s([{id:"praha4",name:"Praha 4 Official",url:"https://www.praha4.cz/rss",enabled:!0,category_hint:"local_government",last_fetched:Date.now()-36e5,fetch_count:145,error_count:3},{id:"praha2",name:"Praha 2 Official",url:"https://www.praha2.cz/rss",enabled:!0,category_hint:"local_government",last_fetched:Date.now()-36e5,fetch_count:138,error_count:1}])}try{let e=w?"".concat("https://rss-collect.jhaladik.workers.dev","?include_raw=true&limit=100"):"https://rss-collect.jhaladik.workers.dev",s=await fetch(e);if(s.ok){let e=await s.json();w&&Array.isArray(e.items)?r([{source:"all_sources",url:"combined",collected:e.total||0,qualified:e.qualified||0,errors:[],items:e.items}]):Array.isArray(e.sources)?r(e.sources):r([])}else r([])}catch(e){r([])}try{let e=await fetch("https://pipeline-orchestrator.jhaladik.workers.dev");if(e.ok){let s=await e.json();x(s)}else x(null)}catch(e){x(null)}try{let e=await fetch("".concat("https://admin-review-enhanced.jhaladik.workers.dev","?action=insights"));if(e.ok){let s=await e.json();m(s)}else m(null)}catch(e){m(null)}try{let e=await fetch("https://scheduler-daily-enhanced.jhaladik.workers.dev");if(e.ok){let s=await e.json();b(s)}else b(null)}catch(e){b(null)}}catch(e){v("❌ Chyba při nač\xedt\xe1n\xed dat")}finally{p(!1)}},S=async()=>{if(!f.name||!f.url){v("❌ Vyplňte n\xe1zev a URL");return}try{(await fetch("https://rss-sources-management.jhaladik.workers.dev",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:f.name.toLowerCase().replace(/\s+/g,"-"),...f})})).ok?(D({name:"",url:"",category_hint:"local_government"}),v("✅ Nov\xfd RSS zdroj ".concat(f.name," přid\xe1n")),await C()):v("❌ Chyba při přid\xe1v\xe1n\xed zdroje")}catch(e){v("❌ S\xedťov\xe1 chyba při přid\xe1v\xe1n\xed zdroje")}},_=async(e,t)=>{try{(await fetch("https://rss-sources-management.jhaladik.workers.dev",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e,enabled:t})})).ok?(s(s=>s.map(s=>s.id===e?{...s,enabled:t}:s)),v("✅ Zdroj ".concat(e," ").concat(t?"aktivov\xe1n":"deaktivov\xe1n"))):v("❌ Chyba při aktualizaci zdroje")}catch(a){s(s=>s.map(s=>s.id===e?{...s,enabled:t}:s)),v("✅ Zdroj ".concat(e," ").concat(t?"aktivov\xe1n":"deaktivov\xe1n"," (local)"))}},A=async e=>{if(confirm("Opravdu smazat RSS zdroj ".concat(e,"?")))try{(await fetch("https://rss-sources-management.jhaladik.workers.dev",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e})})).ok?(s(s=>s.filter(s=>s.id!==e)),v("✅ RSS zdroj ".concat(e," smaz\xe1n"))):v("❌ Chyba při maz\xe1n\xed zdroje")}catch(e){v("❌ S\xedťov\xe1 chyba při maz\xe1n\xed zdroje")}},P=async e=>{p(!0);try{let s;let t="";switch(e){case"collect":if((s=await fetch("https://rss-collect.jhaladik.workers.dev",{method:"POST"})).ok){let e=await s.json();t="✅ RSS collection: ".concat(e.collected," položek")}break;case"score":if((s=await fetch("https://ai-data-score.jhaladik.workers.dev",{method:"POST"})).ok){let e=await s.json();t="✅ AI Scoring: ".concat(e.qualified,"/").concat(e.processed," kvalifikov\xe1no")}break;case"generate":if((s=await fetch("https://ai-generate-enhanced.jhaladik.workers.dev",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({neighborhood:"praha4",batch_process:!0})})).ok){let e=await s.json();t="✅ AI Generation: ".concat(e.generated||0," obsahů vygenerov\xe1no")}break;case"validate":if((s=await fetch("https://ai-validate-enhanced.jhaladik.workers.dev",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({batch_process:!0})})).ok){let e=await s.json();t="✅ AI Validation: ".concat(e.validated||0," obsahů validov\xe1no")}break;case"publish":if((s=await fetch("https://content-publish.jhaladik.workers.dev",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({auto_publish:!0})})).ok){let e=await s.json();t="✅ Publishing: ".concat(e.published||0," obsahů publikov\xe1no")}break;case"full":if((s=await fetch("https://pipeline-orchestrator.jhaladik.workers.dev",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({mode:"full"})})).ok){let e=await s.json();t="✅ Full Pipeline: Run ID ".concat(e.pipeline_run_id),c(s=>[e,...s.slice(0,9)])}}(null==s?void 0:s.ok)?(v(t),await C()):v("❌ Chyba při ".concat(e," operaci"))}catch(s){v("❌ S\xedťov\xe1 chyba při ".concat(e," operaci"))}p(!1)},z=e=>{if(!e.enabled)return"text-gray-500";if(!e.last_fetched)return"text-yellow-500";let s=(e.error_count||0)/Math.max(e.fetch_count||1,1),t=(Date.now()-e.last_fetched)/36e5;return s>.1||t>6?"text-red-500":s>.05||t>3?"text-yellow-500":"text-green-500"},R=e=>{if(!e.enabled)return"Zak\xe1z\xe1no";if(!e.last_fetched)return"Nov\xfd";let s=(e.error_count||0)/Math.max(e.fetch_count||1,1),t=(Date.now()-e.last_fetched)/36e5;return s>.1?"Vysok\xe1 chybovost":t>6?"Neaktivn\xed":t>3?"Zastaral\xe9":"Zdrav\xfd"},O=e=>e?new Date(e).toLocaleString("cs-CZ"):"Nikdy",E=e=>e<1e3?"".concat(e,"ms"):"".concat((e/1e3).toFixed(1),"s"),T=e=>({local_government:"bg-blue-100 text-blue-800",transport:"bg-orange-100 text-orange-800",weather:"bg-yellow-100 text-yellow-800",business:"bg-green-100 text-green-800",emergency:"bg-red-100 text-red-800",community:"bg-purple-100 text-purple-800"})[e]||"bg-gray-100 text-gray-800";return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d(),{children:(0,a.jsx)("title",{children:"RSS Management - Phase 2b Pipeline"})}),(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)("header",{className:"bg-white shadow",children:(0,a.jsxs)("div",{className:"container mx-auto px-4 py-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"\uD83D\uDCE1 RSS Management"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Spr\xe1va RSS zdrojů a pipeline monitoring"})]}),(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsx)("button",{onClick:()=>P("full"),disabled:g,className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 disabled:opacity-50",children:"\uD83D\uDD04 Full Pipeline"}),(0,a.jsx)("button",{onClick:()=>P("collect"),disabled:g,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50",children:"\uD83D\uDCE1 Collect RSS"}),(0,a.jsx)(n(),{href:"/admin/ai-dashboard",className:"px-4 py-2 bg-purple-600 text-white rounded hover:bg-purple-700",children:"\uD83E\uDD16 AI Dashboard"}),(0,a.jsx)(n(),{href:"/admin/dashboard",className:"px-4 py-2 bg-gray-600 text-white rounded hover:bg-gray-700",children:"\uD83D\uDCCA Admin Dashboard"})]})]}),(0,a.jsxs)("div",{className:"mt-4 grid grid-cols-2 md:grid-cols-6 gap-4",children:[(0,a.jsxs)("div",{className:"text-center p-3 bg-blue-50 rounded-lg border border-blue-200",children:[(0,a.jsx)("div",{className:"text-xl font-bold text-blue-600",children:e.filter(e=>e.enabled).length}),(0,a.jsx)("div",{className:"text-sm text-blue-700",children:"Aktivn\xed zdroje"})]}),(0,a.jsxs)("div",{className:"text-center p-3 bg-green-50 rounded-lg border border-green-200",children:[(0,a.jsx)("div",{className:"text-xl font-bold text-green-600",children:(null==o?void 0:o.collected)||0}),(0,a.jsx)("div",{className:"text-sm text-green-700",children:"Sebran\xfd obsah"})]}),(0,a.jsxs)("div",{className:"text-center p-3 bg-yellow-50 rounded-lg border border-yellow-200",children:[(0,a.jsx)("div",{className:"text-xl font-bold text-yellow-600",children:(null==o?void 0:o.scored)||0}),(0,a.jsx)("div",{className:"text-sm text-yellow-700",children:"AI Scoring"})]}),(0,a.jsxs)("div",{className:"text-center p-3 bg-purple-50 rounded-lg border border-purple-200",children:[(0,a.jsx)("div",{className:"text-xl font-bold text-purple-600",children:(null==o?void 0:o.generated)||0}),(0,a.jsx)("div",{className:"text-sm text-purple-700",children:"Vygenerov\xe1no"})]}),(0,a.jsxs)("div",{className:"text-center p-3 bg-orange-50 rounded-lg border border-orange-200",children:[(0,a.jsx)("div",{className:"text-xl font-bold text-orange-600",children:(null==o?void 0:o.validated)||0}),(0,a.jsx)("div",{className:"text-sm text-orange-700",children:"Validov\xe1no"})]}),(0,a.jsxs)("div",{className:"text-center p-3 bg-red-50 rounded-lg border border-red-200",children:[(0,a.jsx)("div",{className:"text-xl font-bold text-red-600",children:(null==o?void 0:o.published)||0}),(0,a.jsx)("div",{className:"text-sm text-red-700",children:"Publikov\xe1no"})]})]})]})}),(0,a.jsxs)("div",{className:"container mx-auto px-4 py-4",children:[j&&(0,a.jsx)("div",{className:"mb-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:j}),(0,a.jsxs)("div",{className:"mb-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[(0,a.jsx)("h4",{className:"font-semibold text-yellow-800 mb-2",children:"\uD83D\uDD27 Debug Information"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Pipeline Orchestrator:"}),(0,a.jsx)("span",{className:"ml-2 ".concat(o?"text-green-600":"text-red-600"),children:o?"✅ OK":"❌ 500 Error"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"RSS Sources:"}),(0,a.jsx)("span",{className:"ml-2 ".concat(Array.isArray(e)&&e.length>0?"text-green-600":"text-yellow-600"),children:Array.isArray(e)&&e.length>0?"✅ Loaded":"⚠️ Fallback"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Collection Results:"}),(0,a.jsx)("span",{className:"ml-2 ".concat(Array.isArray(t)&&t.length>0?"text-green-600":"text-gray-600"),children:Array.isArray(t)&&t.length>0?"✅ Available":"⚪ Empty"})]})]}),(0,a.jsx)("div",{className:"mt-2 text-xs text-gray-600",children:"Pokud vid\xedte 500 errors, zkuste: 1) Zkontrolovat deployment pipeline-orchestrator.js 2) Zkontrolovat logs: `wrangler tail pipeline-orchestrator`"})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,a.jsx)("div",{className:"flex border-b",children:[{id:"sources",label:"\uD83D\uDCE1 RSS Zdroje",icon:"\uD83D\uDCE1"},{id:"collection",label:"\uD83D\uDCE5 Collection",icon:"\uD83D\uDCE5"},{id:"pipeline",label:"\uD83D\uDD04 Pipeline",icon:"\uD83D\uDD04"},{id:"history",label:"\uD83D\uDCDC Historie",icon:"\uD83D\uDCDC"},{id:"admin",label:"\uD83D\uDC68‍\uD83D\uDCBC Admin",icon:"\uD83D\uDC68‍\uD83D\uDCBC"},{id:"scheduler",label:"⏰ Scheduler",icon:"⏰"}].map(e=>(0,a.jsxs)("button",{onClick:()=>N(e.id),className:"px-6 py-3 font-medium ".concat(y===e.id?"bg-blue-50 text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"),children:[e.icon," ",e.label]},e.id))}),(0,a.jsxs)("div",{className:"p-6",children:["sources"===y&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"➕ Přidat nov\xfd RSS zdroj"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,a.jsx)("input",{type:"text",placeholder:"N\xe1zev zdroje",value:f.name,onChange:e=>D({...f,name:e.target.value}),className:"border rounded px-3 py-2"}),(0,a.jsx)("input",{type:"url",placeholder:"RSS URL",value:f.url,onChange:e=>D({...f,url:e.target.value}),className:"border rounded px-3 py-2"}),(0,a.jsxs)("select",{value:f.category_hint,onChange:e=>D({...f,category_hint:e.target.value}),className:"border rounded px-3 py-2",children:[(0,a.jsx)("option",{value:"local_government",children:"M\xedstn\xed \xfařad"}),(0,a.jsx)("option",{value:"transport",children:"Doprava"}),(0,a.jsx)("option",{value:"weather",children:"Počas\xed"}),(0,a.jsx)("option",{value:"business",children:"Business"}),(0,a.jsx)("option",{value:"emergency",children:"Nouzov\xe9 situace"}),(0,a.jsx)("option",{value:"community",children:"Komunita"})]}),(0,a.jsx)("button",{onClick:S,disabled:g,className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 disabled:opacity-50",children:"➕ Přidat"})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold",children:"\uD83D\uDCCB Konfigurace RSS zdrojů"}),Array.isArray(e)&&e.length>0?e.map(e=>(0,a.jsx)("div",{className:"border rounded-lg p-4 hover:bg-gray-50",children:(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("h4",{className:"font-semibold",children:e.name}),(0,a.jsx)("span",{className:"px-2 py-1 rounded text-xs ".concat(T(e.category_hint)),children:e.category_hint}),(0,a.jsxs)("span",{className:"text-sm font-medium ".concat(z(e)),children:["● ",R(e)]})]}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e.url}),(0,a.jsxs)("div",{className:"text-xs text-gray-500 mt-2 grid grid-cols-3 gap-4",children:[(0,a.jsxs)("span",{children:["Posledn\xed: ",O(e.last_fetched||0)]}),(0,a.jsxs)("span",{children:["\xdaspěšn\xe9: ",e.fetch_count||0]}),(0,a.jsxs)("span",{children:["Chyby: ",e.error_count||0]})]})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{onClick:()=>_(e.id,!e.enabled),className:"px-3 py-1 rounded text-sm ".concat(e.enabled?"bg-green-100 text-green-800 hover:bg-green-200":"bg-gray-100 text-gray-800 hover:bg-gray-200"),children:e.enabled?"✅ Aktivn\xed":"❌ Neaktivn\xed"}),(0,a.jsx)("button",{onClick:()=>A(e.id),className:"px-3 py-1 bg-red-100 text-red-800 rounded text-sm hover:bg-red-200",children:"\uD83D\uDDD1️ Smazat"})]})]})},e.id)):(0,a.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,a.jsx)("div",{className:"text-4xl mb-4",children:"\uD83D\uDCE1"}),(0,a.jsx)("p",{children:"Ž\xe1dn\xe9 RSS zdroje nenalezeny"}),(0,a.jsx)("p",{className:"text-sm mt-2",children:"Přidejte nov\xfd zdroj v\xfdše"})]})]})]}),"collection"===y&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold",children:"\uD83D\uDCE5 RSS Collection v\xfdsledky"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)("label",{className:"flex items-center gap-2",children:[(0,a.jsx)("input",{type:"checkbox",checked:w,onChange:e=>k(e.target.checked)}),(0,a.jsx)("span",{className:"text-sm",children:"Zobrazit všechen raw obsah"})]}),(0,a.jsx)("button",{onClick:()=>P("collect"),disabled:g,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 disabled:opacity-50",children:"\uD83D\uDD04 Refresh Collection"})]})]}),Array.isArray(t)&&t.length>0?t.map((e,s)=>(0,a.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-semibold",children:e.source}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:e.url})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("div",{className:"text-lg font-bold text-green-600",children:e.collected}),(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:[e.qualified,"/",e.collected," kvalifikov\xe1no"]})]})]}),Array.isArray(e.errors)&&e.errors.length>0&&(0,a.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded p-3 mb-3",children:[(0,a.jsx)("h5",{className:"font-medium text-red-800 mb-2",children:"Chyby:"}),e.errors.map((e,s)=>(0,a.jsx)("p",{className:"text-sm text-red-600",children:e},s))]}),Array.isArray(e.items)&&e.items.length>0&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h5",{className:"font-medium",children:"Sebran\xfd obsah:"}),e.items.slice(0,5).map((e,s)=>{var t;return(0,a.jsx)("div",{className:"bg-gray-50 p-3 rounded text-sm",children:(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h6",{className:"font-medium",children:e.title}),(0,a.jsxs)("p",{className:"text-gray-600 mt-1",children:[null===(t=e.content_text)||void 0===t?void 0:t.slice(0,150),"..."]})]}),(0,a.jsxs)("div",{className:"text-right text-xs text-gray-500",children:[e.raw_score&&(0,a.jsxs)("div",{className:"px-2 py-1 rounded ".concat(e.raw_score>=.6?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:["Score: ",e.raw_score.toFixed(2)]}),e.category&&(0,a.jsx)("div",{className:"px-2 py-1 rounded mt-1 ".concat(T(e.category)),children:e.category})]})]})},s)}),e.items.length>5&&(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["... a ",e.items.length-5," dalš\xedch položek"]})]})]},s)):(0,a.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,a.jsx)("div",{className:"text-4xl mb-4",children:"\uD83D\uDCE5"}),(0,a.jsx)("p",{children:"Ž\xe1dn\xe9 collection v\xfdsledky"}),(0,a.jsx)("button",{onClick:()=>P("collect"),className:"mt-4 bg-blue-600 text-white px-6 py-2 rounded hover:bg-blue-700",children:"Spustit RSS Collection"})]})]}),"pipeline"===y&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold",children:"\uD83D\uDD04 Pipeline operace"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("button",{onClick:()=>P("collect"),disabled:g,className:"p-4 bg-blue-50 border border-blue-200 rounded-lg hover:bg-blue-100 disabled:opacity-50",children:[(0,a.jsx)("div",{className:"text-xl mb-2",children:"\uD83D\uDCE1"}),(0,a.jsx)("div",{className:"font-semibold",children:"RSS Collection"}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Sběr RSS feedů"})]}),(0,a.jsxs)("button",{onClick:()=>P("score"),disabled:g,className:"p-4 bg-yellow-50 border border-yellow-200 rounded-lg hover:bg-yellow-100 disabled:opacity-50",children:[(0,a.jsx)("div",{className:"text-xl mb-2",children:"\uD83C\uDFAF"}),(0,a.jsx)("div",{className:"font-semibold",children:"AI Scoring"}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Hodnocen\xed obsahu"})]}),(0,a.jsxs)("button",{onClick:()=>P("generate"),disabled:g,className:"p-4 bg-purple-50 border border-purple-200 rounded-lg hover:bg-purple-100 disabled:opacity-50",children:[(0,a.jsx)("div",{className:"text-xl mb-2",children:"✍️"}),(0,a.jsx)("div",{className:"font-semibold",children:"AI Generation"}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Generov\xe1n\xed obsahu"})]}),(0,a.jsxs)("button",{onClick:()=>P("validate"),disabled:g,className:"p-4 bg-orange-50 border border-orange-200 rounded-lg hover:bg-orange-100 disabled:opacity-50",children:[(0,a.jsx)("div",{className:"text-xl mb-2",children:"\uD83D\uDD0D"}),(0,a.jsx)("div",{className:"font-semibold",children:"AI Validation"}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Validace obsahu"})]}),(0,a.jsxs)("button",{onClick:()=>P("publish"),disabled:g,className:"p-4 bg-green-50 border border-green-200 rounded-lg hover:bg-green-100 disabled:opacity-50",children:[(0,a.jsx)("div",{className:"text-xl mb-2",children:"\uD83D\uDCF0"}),(0,a.jsx)("div",{className:"font-semibold",children:"Publishing"}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Publikov\xe1n\xed"})]}),(0,a.jsxs)("button",{onClick:()=>P("full"),disabled:g,className:"p-4 bg-gradient-to-r from-blue-50 to-green-50 border-2 border-blue-200 rounded-lg hover:from-blue-100 hover:to-green-100 disabled:opacity-50",children:[(0,a.jsx)("div",{className:"text-xl mb-2",children:"\uD83D\uDE80"}),(0,a.jsx)("div",{className:"font-semibold",children:"Full Pipeline"}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Kompletn\xed běh"})]})]}),o&&(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,a.jsx)("h4",{className:"font-semibold mb-3",children:"\uD83D\uDCCA Aktu\xe1ln\xed pipeline statistiky"}),(0,a.jsxs)("div",{className:"grid grid-cols-5 gap-4 text-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:o.collected}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Collected"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-yellow-600",children:o.scored}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Scored"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:o.generated}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Generated"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-orange-600",children:o.validated}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Validated"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-green-600",children:o.published}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Published"})]})]}),o.completed_at&&(0,a.jsxs)("div",{className:"mt-3 text-sm text-gray-500 text-center",children:["Run ID: ",o.pipeline_run_id," | Dokončeno: ",O(o.completed_at)," | Doba trv\xe1n\xed: ",E(o.duration_ms)]})]})]}),"history"===y&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold",children:"\uD83D\uDCDC Historie pipeline běhů"}),Array.isArray(i)&&i.length>0?(0,a.jsx)("div",{className:"space-y-4",children:i.map((e,s)=>(0,a.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h4",{className:"font-semibold",children:["Run ID: ",e.pipeline_run_id]}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["Zač\xe1tek: ",O(e.started_at)]}),e.completed_at&&(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["Konec: ",O(e.completed_at),"(",E(e.duration_ms||0),")"]})]}),(0,a.jsx)("span",{className:"px-3 py-1 rounded text-sm ".concat(e.success?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.success?"✅ \xdaspěch":"❌ Chyba"})]}),(0,a.jsxs)("div",{className:"mt-3 grid grid-cols-5 gap-4 text-center text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-semibold text-blue-600",children:e.collected}),(0,a.jsx)("div",{className:"text-gray-600",children:"Collected"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-semibold text-yellow-600",children:e.scored}),(0,a.jsx)("div",{className:"text-gray-600",children:"Scored"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-semibold text-purple-600",children:e.generated}),(0,a.jsx)("div",{className:"text-gray-600",children:"Generated"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-semibold text-orange-600",children:e.validated}),(0,a.jsx)("div",{className:"text-gray-600",children:"Validated"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-semibold text-green-600",children:e.published}),(0,a.jsx)("div",{className:"text-gray-600",children:"Published"})]})]}),Array.isArray(e.errors)&&e.errors.length>0&&(0,a.jsxs)("div",{className:"mt-3 bg-red-50 border border-red-200 rounded p-3",children:[(0,a.jsx)("h5",{className:"font-medium text-red-800 mb-2",children:"Chyby:"}),e.errors.map((e,s)=>(0,a.jsx)("p",{className:"text-sm text-red-600",children:e},s))]})]},s))}):(0,a.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,a.jsx)("div",{className:"text-4xl mb-4",children:"\uD83D\uDCDC"}),(0,a.jsx)("p",{children:"Ž\xe1dn\xe1 historie pipeline běhů"}),(0,a.jsx)("button",{onClick:()=>P("full"),className:"mt-4 bg-blue-600 text-white px-6 py-2 rounded hover:bg-blue-700",children:"Spustit prvn\xed pipeline běh"})]})]}),"admin"===y&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold",children:"\uD83D\uDC68‍\uD83D\uDCBC Admin Review & Insights"}),h?(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,a.jsx)("h4",{className:"font-semibold mb-3",children:"\uD83D\uDCCA Review Queue Status"}),(0,a.jsx)("div",{className:"text-3xl font-bold text-blue-600 mb-2",children:h.queue_length}),(0,a.jsx)("p",{className:"text-gray-600",children:"Obsahů ček\xe1 na review"}),(0,a.jsx)(n(),{href:"/admin/dashboard",className:"mt-3 inline-block bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Otevř\xedt Review Queue"})]}),(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,a.jsx)("h4",{className:"font-semibold mb-3",children:"\uD83C\uDFAF Confidence Distribution"}),(0,a.jsx)("div",{className:"space-y-2",children:h.confidence_distribution&&Object.entries(h.confidence_distribution).map(e=>{let[s,t]=e;return(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-sm",children:s}),(0,a.jsx)("span",{className:"font-semibold",children:t})]},s)})})]}),(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,a.jsx)("h4",{className:"font-semibold mb-3",children:"\uD83D\uDCC8 Category Breakdown"}),(0,a.jsx)("div",{className:"space-y-2",children:h.category_breakdown&&Object.entries(h.category_breakdown).map(e=>{let[s,t]=e;return(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"px-2 py-1 rounded text-xs ".concat(T(s)),children:s}),(0,a.jsx)("span",{className:"font-semibold",children:t})]},s)})})]}),(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,a.jsx)("h4",{className:"font-semibold mb-3",children:"\uD83D\uDCC5 Recent Trends"}),(0,a.jsx)("div",{className:"space-y-2",children:Array.isArray(h.recent_trends)&&h.recent_trends.slice(0,5).map((e,s)=>(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{children:e.date}),(0,a.jsxs)("span",{children:[(0,a.jsxs)("span",{className:"text-green-600",children:["+",e.approved]})," /",(0,a.jsxs)("span",{className:"text-red-600",children:["-",e.rejected]})]})]},s))})]})]}):(0,a.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,a.jsx)("div",{className:"text-4xl mb-4",children:"\uD83D\uDC68‍\uD83D\uDCBC"}),(0,a.jsx)("p",{children:"Admin insights nejsou k dispozici"})]})]}),"scheduler"===y&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold",children:"⏰ Scheduler Status"}),u?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,a.jsx)("h4",{className:"font-semibold mb-3",children:"\uD83D\uDCCA Scheduler Overview"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold ".concat("active"===u.scheduler?"text-green-600":"text-red-600"),children:"active"===u.scheduler?"✅":"❌"}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Scheduler Status"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:u.today_stats.collected}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Dnes sebran\xfdch"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-green-600",children:u.today_stats.published}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Dnes publikovan\xfdch"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-red-600",children:u.today_stats.errors}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Dnes chyb"})]})]}),(0,a.jsxs)("div",{className:"mt-3 text-sm text-gray-500 text-center",children:["Dalš\xed pl\xe1novan\xfd běh: ",u.next_scheduled]})]}),u.last_run&&(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,a.jsx)("h4",{className:"font-semibold mb-3",children:"\uD83D\uDD04 Posledn\xed automatick\xfd běh"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Run ID"}),(0,a.jsx)("div",{className:"font-semibold",children:u.last_run.pipeline_run_id})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Dokončeno"}),(0,a.jsx)("div",{className:"font-semibold",children:O(u.last_run.completed_at||0)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Status"}),(0,a.jsx)("span",{className:"px-2 py-1 rounded text-xs ".concat(u.last_run.success?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:u.last_run.success?"\xdaspěch":"Chyba"})]})]}),(0,a.jsxs)("div",{className:"mt-3 grid grid-cols-5 gap-4 text-center text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-semibold text-blue-600",children:u.last_run.collected}),(0,a.jsx)("div",{className:"text-gray-600",children:"Collected"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-semibold text-yellow-600",children:u.last_run.scored}),(0,a.jsx)("div",{className:"text-gray-600",children:"Scored"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-semibold text-purple-600",children:u.last_run.generated}),(0,a.jsx)("div",{className:"text-gray-600",children:"Generated"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-semibold text-orange-600",children:u.last_run.validated}),(0,a.jsx)("div",{className:"text-gray-600",children:"Validated"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-semibold text-green-600",children:u.last_run.published}),(0,a.jsx)("div",{className:"text-gray-600",children:"Published"})]})]})]}),(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsx)("button",{onClick:()=>P("full"),disabled:g,className:"bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 disabled:opacity-50",children:"\uD83D\uDE80 Manu\xe1lně spustit pipeline"})})]}):(0,a.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,a.jsx)("div",{className:"text-4xl mb-4",children:"⏰"}),(0,a.jsx)("p",{children:"Scheduler status nen\xed k dispozici"})]})]})]})]})]})]})]})}}},function(e){e.O(0,[996,888,774,179],function(){return e(e.s=8242)}),_N_E=e.O()}]);