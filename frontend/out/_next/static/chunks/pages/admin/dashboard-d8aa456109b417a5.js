(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[189],{2599:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/dashboard",function(){return t(4991)}])},4991:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return c}});var a=t(5893),l=t(7294),n=t(9008),r=t.n(n),d=t(1664),i=t.n(d);function c(){let[e,s]=(0,l.useState)([]),[t,n]=(0,l.useState)([]),[d,c]=(0,l.useState)(null),[o,x]=(0,l.useState)([]),[h,u]=(0,l.useState)(!1),[b,p]=(0,l.useState)(""),[m,g]=(0,l.useState)("queue"),[y,j]=(0,l.useState)(null);(0,l.useEffect)(()=>{v()},[]);let v=async()=>{try{let e=await fetch("https://admin-review-enhanced.jhaladik.workers.dev"),t=await e.json();s(t.queue||[]);let a=await fetch("".concat("https://admin-review-enhanced.jhaladik.workers.dev","?action=insights")),l=await a.json();n(l.insights||[]);let r=await fetch("https://scheduler-daily-enhanced.jhaladik.workers.dev"),d=await r.json();c(d.today_stats||null);let i=await fetch("https://scheduler-daily-enhanced.jhaladik.workers.dev");if(i.ok){let e=await i.json();j(e.today_stats||{collected_today:0,generated_today:0,pipeline_status:"active"})}}catch(e){}},N=async e=>{u(!0);try{(await fetch("".concat("https://admin-review-enhanced.jhaladik.workers.dev","?action=approve"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content_id:e,publish_immediately:!0})})).ok?(s(s=>s.filter(s=>s.id!==e)),p("✅ Obsah schv\xe1len a publikov\xe1n")):p("❌ Chyba při schvalov\xe1n\xed")}catch(e){p("❌ S\xedťov\xe1 chyba")}u(!1)},f=async()=>{if(0!==o.length){u(!0);try{let e=await fetch("".concat("https://admin-review-enhanced.jhaladik.workers.dev","?action=batch"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content_ids:o,min_confidence:.85})});if(e.ok){let t=await e.json();s(e=>e.filter(e=>!o.includes(e.id))),x([]),p("✅ ".concat(t.approved," čl\xe1nků hromadně schv\xe1leno"))}else p("❌ Chyba při hromadn\xe9m schvalov\xe1n\xed")}catch(e){p("❌ S\xedťov\xe1 chyba")}u(!1)}},w=async()=>{u(!0);try{let e=await fetch("https://pipeline-orchestrator.jhaladik.workers.dev",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({mode:"full"})});if(e.ok){let s=await e.json();p("✅ Pipeline spuštěn: ".concat(s.collected," RSS, ").concat(s.generated," generov\xe1no")),await v()}else p("❌ Chyba při spouštěn\xed pipeline")}catch(e){p("❌ S\xedťov\xe1 chyba")}u(!1)},D=e=>({emergency:"bg-red-100 text-red-800 border-red-300",transport:"bg-orange-100 text-orange-800 border-orange-300",local_government:"bg-blue-100 text-blue-800 border-blue-300",community:"bg-green-100 text-green-800 border-green-300",business:"bg-purple-100 text-purple-800 border-purple-300",weather:"bg-yellow-100 text-yellow-800 border-yellow-300"})[e]||"bg-gray-100 text-gray-800 border-gray-300",k=e=>e>=.9?"text-green-600":e>=.8?"text-blue-600":e>=.7?"text-yellow-600":"text-red-600",_=e=>({urgent:"bg-red-100 text-red-700 border-red-300",high:"bg-orange-100 text-orange-700 border-orange-300",medium:"bg-yellow-100 text-yellow-700 border-yellow-300",low:"bg-gray-100 text-gray-700 border-gray-300"})[e]||"bg-gray-100 text-gray-700 border-gray-300",S=e.filter(e=>e.ai_confidence>=.85),C=e.filter(e=>"urgent"===e.priority);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r(),{children:(0,a.jsx)("title",{children:"Admin Dashboard - Phase 2b RSS Pipeline"})}),(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)("header",{className:"bg-white shadow",children:(0,a.jsxs)("div",{className:"container mx-auto px-4 py-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"\uD83D\uDCCB Admin Dashboard - Phase 2b"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Spr\xe1va obsahu s RSS Pipeline"})]}),(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsx)("button",{onClick:w,disabled:h,className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 disabled:opacity-50",children:"\uD83D\uDD04 Spustit Pipeline"}),(0,a.jsx)(i(),{href:"/admin/ai-dashboard",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"\uD83E\uDD16 AI Dashboard"}),(0,a.jsx)(i(),{href:"/",className:"px-4 py-2 bg-gray-600 text-white rounded hover:bg-gray-700",children:"\uD83C\uDFE0 Domů"})]})]}),(0,a.jsxs)("div",{className:"mt-4 grid grid-cols-2 md:grid-cols-5 gap-4",children:[(0,a.jsxs)("div",{className:"text-center p-3 bg-blue-50 rounded-lg border border-blue-200",children:[(0,a.jsx)("div",{className:"text-xl font-bold text-blue-600",children:e.length}),(0,a.jsx)("div",{className:"text-sm text-blue-700",children:"Ček\xe1 na schv\xe1len\xed"})]}),(0,a.jsxs)("div",{className:"text-center p-3 bg-green-50 rounded-lg border border-green-200",children:[(0,a.jsx)("div",{className:"text-xl font-bold text-green-600",children:S.length}),(0,a.jsx)("div",{className:"text-sm text-green-700",children:"Vysok\xe1 AI důvěra"})]}),(0,a.jsxs)("div",{className:"text-center p-3 bg-purple-50 rounded-lg border border-purple-200",children:[(0,a.jsx)("div",{className:"text-xl font-bold text-purple-600",children:(null==y?void 0:y.collected_today)||0}),(0,a.jsx)("div",{className:"text-sm text-purple-700",children:"RSS dnes"})]}),(0,a.jsxs)("div",{className:"text-center p-3 bg-orange-50 rounded-lg border border-orange-200",children:[(0,a.jsx)("div",{className:"text-xl font-bold text-orange-600",children:(null==y?void 0:y.generated_today)||0}),(0,a.jsx)("div",{className:"text-sm text-orange-700",children:"AI generov\xe1no"})]}),(0,a.jsxs)("div",{className:"text-center p-3 bg-yellow-50 rounded-lg border border-yellow-200",children:[(0,a.jsx)("div",{className:"text-xl font-bold text-yellow-600",children:C.length}),(0,a.jsx)("div",{className:"text-sm text-yellow-700",children:"Urgentn\xed"})]})]})]})}),(0,a.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[b&&(0,a.jsx)("div",{className:"mb-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:b}),(0,a.jsxs)("div",{className:"mb-6 bg-white rounded-lg shadow",children:[(0,a.jsxs)("div",{className:"flex border-b",children:[(0,a.jsx)("button",{onClick:()=>g("queue"),className:"px-6 py-3 font-medium ".concat("queue"===m?"border-b-2 border-blue-500 text-blue-600":"text-gray-500 hover:text-gray-700"),children:"\uD83D\uDCCB Review Queue"}),(0,a.jsx)("button",{onClick:()=>g("insights"),className:"px-6 py-3 font-medium ".concat("insights"===m?"border-b-2 border-blue-500 text-blue-600":"text-gray-500 hover:text-gray-700"),children:"\uD83D\uDCCA Category Insights"}),(0,a.jsx)("button",{onClick:()=>g("pipeline"),className:"px-6 py-3 font-medium ".concat("pipeline"===m?"border-b-2 border-blue-500 text-blue-600":"text-gray-500 hover:text-gray-700"),children:"\uD83D\uDD04 Pipeline Status"})]}),(0,a.jsxs)("div",{className:"p-6",children:["queue"===m&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsxs)("button",{onClick:f,disabled:0===o.length||h,className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 disabled:opacity-50",children:["⚡ Hromadně schv\xe1lit (",o.length,")"]}),(0,a.jsx)("button",{onClick:()=>x(S.map(e=>e.id)),className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"\uD83C\uDFAF Vybrat vysokou důvěru"}),(0,a.jsx)("button",{onClick:()=>x([]),className:"px-4 py-2 bg-gray-600 text-white rounded hover:bg-gray-700",children:"❌ Zrušit v\xfdběr"})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[e.map(e=>(0,a.jsx)("div",{className:"bg-white border rounded-lg p-4 shadow-sm",children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,a.jsx)("input",{type:"checkbox",checked:o.includes(e.id),onChange:s=>{s.target.checked?x([...o,e.id]):x(o.filter(s=>s!==e.id))},className:"rounded"}),(0,a.jsx)("h3",{className:"font-medium text-lg text-gray-900",children:e.title}),e.priority&&(0,a.jsx)("span",{className:"px-2 py-1 text-xs rounded border ".concat(_(e.priority)),children:e.priority.toUpperCase()})]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2 mb-3",children:[(0,a.jsx)("span",{className:"px-2 py-1 text-xs rounded border ".concat(D(e.category)),children:e.category}),(0,a.jsxs)("span",{className:"px-2 py-1 text-xs rounded bg-gray-100 ".concat(k(e.ai_confidence)),children:["AI: ",(100*e.ai_confidence).toFixed(0),"%"]}),e.raw_source&&(0,a.jsxs)("span",{className:"px-2 py-1 text-xs rounded bg-purple-100 text-purple-800",children:["\uD83D\uDCE1 ",e.raw_source]}),e.raw_score&&(0,a.jsxs)("span",{className:"px-2 py-1 text-xs rounded bg-yellow-100 text-yellow-800",children:["RSS: ",(100*e.raw_score).toFixed(0),"%"]})]}),(0,a.jsx)("p",{className:"text-gray-700 mb-3 line-clamp-3",children:e.content}),e.insights&&e.insights.length>0&&(0,a.jsxs)("div",{className:"mb-3",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"\uD83E\uDD16 AI Insights:"}),(0,a.jsx)("ul",{className:"text-sm text-gray-600 space-y-1",children:e.insights.map((e,s)=>(0,a.jsxs)("li",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"w-1.5 h-1.5 bg-blue-400 rounded-full"}),e]},s))})]})]}),(0,a.jsx)("div",{className:"flex gap-2 ml-4",children:(0,a.jsx)("button",{onClick:()=>N(e.id),disabled:h,className:"px-3 py-1 bg-green-600 text-white text-sm rounded hover:bg-green-700 disabled:opacity-50",children:"✅ Schv\xe1lit"})})]})},e.id)),0===e.length&&(0,a.jsx)("div",{className:"text-center py-8 text-gray-500",children:"\uD83D\uDCDD Ž\xe1dn\xe9 položky k review. RSS pipeline funguje automaticky!"})]})]}),"insights"===m&&(0,a.jsx)("div",{className:"space-y-6",children:(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map(e=>(0,a.jsxs)("div",{className:"bg-white border rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsx)("span",{className:"px-3 py-1 text-sm rounded border ".concat(D(e.category)),children:e.category}),(0,a.jsx)("span",{className:"text-2xl font-bold text-gray-900",children:e.total_content})]}),(0,a.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Publikov\xe1no:"}),(0,a.jsx)("span",{className:"font-medium",children:e.published_count})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Průměrn\xe1 důvěra:"}),(0,a.jsxs)("span",{className:"font-medium ".concat(k(e.avg_confidence)),children:[(100*e.avg_confidence).toFixed(0),"%"]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Zam\xedtnuto:"}),(0,a.jsx)("span",{className:"font-medium text-red-600",children:e.rejected_count})]})]})]},e.category))})}),"pipeline"===m&&(0,a.jsx)("div",{className:"space-y-6",children:d&&(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{className:"bg-blue-50 p-6 rounded-lg border border-blue-200",children:[(0,a.jsx)("h3",{className:"font-semibold text-blue-900 mb-4",children:"\uD83D\uDCE1 RSS Collection"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{children:"Dnes zpracov\xe1no:"}),(0,a.jsx)("span",{className:"font-bold",children:d.rss_collected_today})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{children:"AI sk\xf3rov\xe1no:"}),(0,a.jsx)("span",{className:"font-bold",children:d.ai_scored_today})]})]})]}),(0,a.jsxs)("div",{className:"bg-green-50 p-6 rounded-lg border border-green-200",children:[(0,a.jsx)("h3",{className:"font-semibold text-green-900 mb-4",children:"\uD83E\uDD16 AI Generation"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{children:"Dnes generov\xe1no:"}),(0,a.jsx)("span",{className:"font-bold",children:d.generated_today})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{children:"Auto-schv\xe1leno:"}),(0,a.jsxs)("span",{className:"font-bold",children:[Math.round(100*d.auto_approval_rate),"%"]})]})]})]}),(0,a.jsxs)("div",{className:"bg-purple-50 p-6 rounded-lg border border-purple-200",children:[(0,a.jsx)("h3",{className:"font-semibold text-purple-900 mb-4",children:"\uD83D\uDCF0 Publication"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{children:"Dnes publikov\xe1no:"}),(0,a.jsx)("span",{className:"font-bold",children:d.published_today})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{children:"Čekaj\xedc\xed:"}),(0,a.jsx)("span",{className:"font-bold",children:e.length})]})]})]})]})})]})]})]})]})]})}}},function(e){e.O(0,[996,888,774,179],function(){return e(e.s=2599)}),_N_E=e.O()}]);