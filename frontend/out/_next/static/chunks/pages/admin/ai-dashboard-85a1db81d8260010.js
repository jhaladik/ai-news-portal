(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[610],{3525:function(e,s,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/ai-dashboard",function(){return a(5113)}])},5113:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return c}});var l=a(5893),t=a(9008),d=a.n(t),n=a(1664),i=a.n(n),r=a(7294);function c(){let[e,s]=(0,r.useState)("overview"),[a,t]=(0,r.useState)(null),[n,c]=(0,r.useState)(null),[o,h]=(0,r.useState)({threshold:.85,enabled:!0,max_items:20,dry_run:!1}),[x,u]=(0,r.useState)(!0),[m,p]=(0,r.useState)("");(0,r.useEffect)(()=>{(async()=>{u(!0);try{let e=await fetch("".concat("https://admin-review-queue.jhaladik.workers.dev","/?view=ai_metrics"));if(e.ok){let s=await e.json();t(s)}let s=await fetch("https://data-collect-prague.jhaladik.workers.dev"),a=await fetch("https://data-collect-dpp.jhaladik.workers.dev"),[l,d]=await Promise.all([s.json(),a.json()]);c({prague_data:l,transport_data:d})}catch(e){p("⚠️ Chyba při nač\xedt\xe1n\xed AI dat")}finally{u(!1)}})()},[]);let v=async(e,s)=>{u(!0);try{let a=await fetch("https://ai-generate.jhaladik.workers.dev",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({neighborhood:e,category:s,type:"manual_request"})});if(a.ok){let e=await a.json();p('✅ Obsah vygenerov\xe1n: "'.concat(e.title,'" (ID: ').concat(e.id,")"))}else p("❌ Chyba při generov\xe1n\xed obsahu")}catch(e){p("❌ S\xedťov\xe1 chyba při generov\xe1n\xed")}finally{u(!1)}},b=async()=>{u(!0);try{(await fetch("https://scheduler-daily.jhaladik.workers.dev",{method:"POST",headers:{"Content-Type":"application/json"}})).ok?p("✅ Denn\xed pipeline spuštěn \xfaspěšně"):p("❌ Chyba při spuštěn\xed pipeline")}catch(e){p("❌ S\xedťov\xe1 chyba")}finally{u(!1)}},j=async()=>{u(!0);try{let e=await fetch("https://content-auto-approve.jhaladik.workers.dev",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});if(e.ok){let s=await e.json();p("✅ Auto-schv\xe1len\xed: ".concat(s.approved," čl\xe1nků schv\xe1leno"))}else p("❌ Chyba při auto-schv\xe1len\xed")}catch(e){p("❌ S\xedťov\xe1 chyba")}finally{u(!1)}};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(d(),{children:(0,l.jsx)("title",{children:"AI Dashboard - M\xedstn\xed Zpr\xe1vy"})}),(0,l.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,l.jsx)("header",{className:"bg-white shadow",children:(0,l.jsx)("div",{className:"container mx-auto px-4 py-6",children:(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"\uD83E\uDD16 AI Content Dashboard"}),(0,l.jsx)("p",{className:"text-gray-600",children:"Spr\xe1va AI generov\xe1n\xed obsahu - Phase 2"})]}),(0,l.jsxs)("div",{className:"flex gap-4",children:[(0,l.jsx)(i(),{href:"/admin/dashboard",className:"px-4 py-2 bg-gray-600 text-white rounded hover:bg-gray-700",children:"\uD83D\uDCCB Review Queue"}),(0,l.jsx)(i(),{href:"/",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"\uD83C\uDFE0 Domů"})]})]})})}),(0,l.jsx)("div",{className:"container mx-auto px-4 py-4",children:(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,l.jsx)("div",{className:"flex border-b",children:[{id:"overview",label:"\uD83D\uDCCA Přehled",icon:"\uD83D\uDCCA"},{id:"generation",label:"\uD83E\uDD16 Generov\xe1n\xed",icon:"\uD83E\uDD16"},{id:"data",label:"\uD83D\uDCE1 Data",icon:"\uD83D\uDCE1"},{id:"quality",label:"\uD83C\uDFAF Kvalita",icon:"\uD83C\uDFAF"},{id:"settings",label:"⚙️ Nastaven\xed",icon:"⚙️"}].map(a=>(0,l.jsx)("button",{onClick:()=>s(a.id),className:"px-6 py-3 font-medium ".concat(e===a.id?"border-b-2 border-blue-500 text-blue-600":"text-gray-500 hover:text-gray-700"),children:a.label},a.id))}),(0,l.jsxs)("div",{className:"p-6",children:[m&&(0,l.jsx)("div",{className:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:(0,l.jsx)("p",{className:"text-blue-800",children:m})}),x&&"overview"!==e&&(0,l.jsxs)("div",{className:"text-center py-8",children:[(0,l.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),(0,l.jsx)("p",{className:"text-gray-500",children:"Nač\xedt\xe1n\xed..."})]}),"overview"===e&&(0,l.jsx)(()=>{var e;return(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,l.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:[(0,l.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:(null==a?void 0:a.ai_worker_performance.reduce((e,s)=>e+s.total_generated,0))||0}),(0,l.jsx)("div",{className:"text-sm text-blue-700",children:"Celkem AI čl\xe1nků"})]}),(0,l.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg border border-green-200",children:[(0,l.jsx)("div",{className:"text-2xl font-bold text-green-600",children:(null==a?void 0:a.ai_worker_performance.reduce((e,s)=>e+s.published_count,0))||0}),(0,l.jsx)("div",{className:"text-sm text-green-700",children:"Publikov\xe1no"})]}),(0,l.jsxs)("div",{className:"bg-purple-50 p-4 rounded-lg border border-purple-200",children:[(0,l.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:(null==a?void 0:null===(e=a.ai_worker_performance[0])||void 0===e?void 0:e.avg_confidence.toFixed(2))||"0.00"}),(0,l.jsx)("div",{className:"text-sm text-purple-700",children:"Průměrn\xe1 důvěra"})]}),(0,l.jsxs)("div",{className:"bg-yellow-50 p-4 rounded-lg border border-yellow-200",children:[(0,l.jsx)("div",{className:"text-2xl font-bold text-yellow-600",children:(null==n?void 0:n.prague_data.collected)||0}),(0,l.jsx)("div",{className:"text-sm text-yellow-700",children:"Data body dnes"})]})]}),(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,l.jsx)("h3",{className:"text-lg font-bold mb-4",children:"\uD83D\uDCC8 Ned\xe1vn\xe1 aktivita"}),(0,l.jsx)("div",{className:"space-y-3",children:null==a?void 0:a.recent_daily_summaries.slice(0,3).map((e,s)=>(0,l.jsxs)("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"font-medium",children:e.date}),(0,l.jsxs)("div",{className:"text-sm text-gray-600",children:[e.content_generation.content_generated," čl\xe1nků, ",e.data_collection.prague_points," dat. bodů"]})]}),(0,l.jsx)("div",{className:"text-right",children:(0,l.jsxs)("div",{className:"text-green-600 font-medium",children:[e.auto_approval.items_approved," auto-schv\xe1leno"]})})]},s))})]}),(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,l.jsx)("h3",{className:"text-lg font-bold mb-4",children:"⚡ Rychl\xe9 akce"}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,l.jsx)("button",{onClick:b,disabled:x,className:"px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:"\uD83D\uDD04 Spustit denn\xed pipeline"}),(0,l.jsx)("button",{onClick:j,disabled:x,className:"px-4 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50",children:"✅ Auto-schv\xe1len\xed"}),(0,l.jsx)(i(),{href:"/admin/dashboard",className:"px-4 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 text-center",children:"\uD83D\uDCCB Review Queue"})]})]})]})},{}),"generation"===e&&(0,l.jsx)(()=>(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,l.jsx)("h3",{className:"text-lg font-bold mb-4",children:"\uD83E\uDD16 Manu\xe1ln\xed generov\xe1n\xed obsahu"}),(0,l.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:["vinohrady","karlin","smichov","zizkov"].map(e=>(0,l.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,l.jsx)("h4",{className:"font-medium mb-3 capitalize",children:e}),(0,l.jsx)("div",{className:"space-y-2",children:["local","weather","transport","events"].map(s=>(0,l.jsxs)("button",{onClick:()=>v(e,s),disabled:x,className:"w-full px-3 py-2 text-sm bg-blue-100 text-blue-800 rounded hover:bg-blue-200 disabled:opacity-50",children:["Generovat ",s]},s))})]},e))})]}),(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,l.jsx)("h3",{className:"text-lg font-bold mb-4",children:"\uD83D\uDCCA V\xfdkon AI workerů"}),(0,l.jsx)("div",{className:"overflow-x-auto",children:(0,l.jsxs)("table",{className:"w-full text-sm",children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{className:"border-b",children:[(0,l.jsx)("th",{className:"text-left p-2",children:"Worker"}),(0,l.jsx)("th",{className:"text-left p-2",children:"Generov\xe1no"}),(0,l.jsx)("th",{className:"text-left p-2",children:"Publikov\xe1no"}),(0,l.jsx)("th",{className:"text-left p-2",children:"Průměrn\xe1 důvěra"}),(0,l.jsx)("th",{className:"text-left p-2",children:"Vysok\xe1 kvalita"})]})}),(0,l.jsx)("tbody",{children:null==a?void 0:a.ai_worker_performance.map((e,s)=>(0,l.jsxs)("tr",{className:"border-b",children:[(0,l.jsx)("td",{className:"p-2 font-medium",children:e.created_by}),(0,l.jsx)("td",{className:"p-2",children:e.total_generated}),(0,l.jsx)("td",{className:"p-2 text-green-600",children:e.published_count}),(0,l.jsx)("td",{className:"p-2",children:e.avg_confidence.toFixed(2)}),(0,l.jsx)("td",{className:"p-2 text-blue-600",children:e.high_quality_count})]},s))})]})})]})]}),{}),"data"===e&&(0,l.jsx)(()=>(0,l.jsx)("div",{className:"space-y-6",children:(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,l.jsx)("h3",{className:"text-lg font-bold mb-4",children:"\uD83C\uDF24️ Pražsk\xe1 data"}),(0,l.jsxs)("div",{className:"space-y-3",children:[(0,l.jsxs)("div",{className:"flex justify-between",children:[(0,l.jsx)("span",{children:"Status:"}),(0,l.jsx)("span",{className:(null==n?void 0:n.prague_data.success)?"text-green-600":"text-red-600",children:(null==n?void 0:n.prague_data.success)?"✅ Aktivn\xed":"❌ Chyba"})]}),(0,l.jsxs)("div",{className:"flex justify-between",children:[(0,l.jsx)("span",{children:"Data body:"}),(0,l.jsx)("span",{children:(null==n?void 0:n.prague_data.collected)||0})]}),(0,l.jsxs)("div",{className:"flex justify-between",children:[(0,l.jsx)("span",{children:"KV Storage:"}),(0,l.jsx)("span",{className:(null==n?void 0:n.prague_data.kv_stored)?"text-green-600":"text-red-600",children:(null==n?void 0:n.prague_data.kv_stored)?"✅ Funkčn\xed":"❌ Nedostupn\xe9"})]}),(null==n?void 0:n.prague_data.preview)&&(0,l.jsx)("div",{className:"mt-4 p-3 bg-blue-50 rounded",children:(0,l.jsxs)("div",{className:"text-sm",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("strong",{children:"Počas\xed:"})," ",n.prague_data.preview.weather]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("strong",{children:"Teplota:"})," ",n.prague_data.preview.temperature,"\xb0C"]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("strong",{children:"Ud\xe1losti:"})," ",n.prague_data.preview.events]})]})})]})]}),(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,l.jsx)("h3",{className:"text-lg font-bold mb-4",children:"\uD83D\uDE8C Dopravn\xed data"}),(0,l.jsxs)("div",{className:"space-y-3",children:[(0,l.jsxs)("div",{className:"flex justify-between",children:[(0,l.jsx)("span",{children:"Status:"}),(0,l.jsx)("span",{className:(null==n?void 0:n.transport_data.success)?"text-green-600":"text-red-600",children:(null==n?void 0:n.transport_data.success)?"✅ Aktivn\xed":"❌ Chyba"})]}),(0,l.jsxs)("div",{className:"flex justify-between",children:[(0,l.jsx)("span",{children:"Omezen\xed:"}),(0,l.jsx)("span",{children:(null==n?void 0:n.transport_data.disruptions)||0})]}),(0,l.jsxs)("div",{className:"flex justify-between",children:[(0,l.jsx)("span",{children:"Čl\xe1nky vytvořeny:"}),(0,l.jsx)("span",{children:(null==n?void 0:n.transport_data.stored_articles)||0})]}),(null==n?void 0:n.transport_data.active_issues)&&n.transport_data.active_issues.length>0&&(0,l.jsxs)("div",{className:"mt-4",children:[(0,l.jsx)("div",{className:"text-sm font-medium mb-2",children:"Aktivn\xed probl\xe9my:"}),(0,l.jsx)("div",{className:"space-y-1",children:n.transport_data.active_issues.map((e,s)=>(0,l.jsxs)("div",{className:"text-xs p-2 bg-yellow-50 rounded",children:[(0,l.jsxs)("div",{className:"font-medium",children:["Linka ",e.line,": ",e.title]}),(0,l.jsxs)("div",{className:"text-gray-600",children:[e.type," - ",e.severity]})]},s))})]})]})]})]})}),{}),"quality"===e&&(0,l.jsx)(()=>(0,l.jsx)("div",{className:"space-y-6",children:(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,l.jsx)("h3",{className:"text-lg font-bold mb-4",children:"\uD83D\uDCC8 Distribuce důvěry AI"}),(0,l.jsx)("div",{className:"space-y-3",children:null==a?void 0:a.confidence_distribution.map((e,s)=>{let a=e.count>0?e.published_in_range/e.count*100:0;return(0,l.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded",children:[(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsx)("div",{className:"font-medium",children:e.confidence_range}),(0,l.jsxs)("div",{className:"text-sm text-gray-600",children:[e.count," čl\xe1nků, ",e.published_in_range," publikov\xe1no"]})]}),(0,l.jsx)("div",{className:"flex-1 mx-4",children:(0,l.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,l.jsx)("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:"".concat(a,"%")}})})}),(0,l.jsxs)("div",{className:"text-right",children:[(0,l.jsxs)("div",{className:"font-medium",children:[a.toFixed(1),"%"]}),(0,l.jsx)("div",{className:"text-sm text-gray-600",children:"\xfaspěšnost"})]})]},s)})})]})}),{}),"settings"===e&&(0,l.jsx)(()=>(0,l.jsx)("div",{className:"space-y-6",children:(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,l.jsx)("h3",{className:"text-lg font-bold mb-4",children:"⚙️ Nastaven\xed auto-schv\xe1len\xed"}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Pr\xe1h důvěry"}),(0,l.jsx)("input",{type:"number",min:"0",max:"1",step:"0.01",value:o.threshold,onChange:e=>h(s=>({...s,threshold:parseFloat(e.target.value)})),className:"w-full px-3 py-2 border rounded-md"}),(0,l.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:["Čl\xe1nky s důvěrou vyšš\xed než ",o.threshold," budou automaticky schv\xe1leny"]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Maxim\xe1ln\xed počet za běh"}),(0,l.jsx)("input",{type:"number",min:"1",max:"100",value:o.max_items,onChange:e=>h(s=>({...s,max_items:parseInt(e.target.value)})),className:"w-full px-3 py-2 border rounded-md"})]}),(0,l.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,l.jsxs)("label",{className:"flex items-center",children:[(0,l.jsx)("input",{type:"checkbox",checked:o.enabled,onChange:e=>h(s=>({...s,enabled:e.target.checked})),className:"mr-2"}),"Povolit auto-schv\xe1len\xed"]}),(0,l.jsxs)("label",{className:"flex items-center",children:[(0,l.jsx)("input",{type:"checkbox",checked:o.dry_run,onChange:e=>h(s=>({...s,dry_run:e.target.checked})),className:"mr-2"}),"Dry run (pouze test)"]})]}),(0,l.jsx)("button",{onClick:j,disabled:x||!o.enabled,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50",children:o.dry_run?"Test auto-schv\xe1len\xed":"Spustit auto-schv\xe1len\xed"})]})]})}),{})]})]})})]})]})}}},function(e){e.O(0,[996,888,774,179],function(){return e(e.s=3525)}),_N_E=e.O()}]);