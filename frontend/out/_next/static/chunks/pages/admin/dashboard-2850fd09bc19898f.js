(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[189],{2599:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/dashboard",function(){return a(4991)}])},4991:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return c}});var n=a(5893),d=a(9008),s=a.n(d),r=a(1664),i=a.n(r),l=a(7294);function c(){let[e,t]=(0,l.useState)([]),[a,d]=(0,l.useState)([]),[r,c]=(0,l.useState)(!0),[o,h]=(0,l.useState)(""),[x,b]=(0,l.useState)({ai_generated_today:0,high_confidence_pending:0,auto_approved_today:0,avg_confidence:0});(0,l.useEffect)(()=>{(async()=>{try{let e=await fetch("".concat("https://admin-review-queue.jhaladik.workers.dev","/?view=pending&limit=20")),a=await e.json();if(a.success&&a.content){t(a.content);let e=new Date().setHours(0,0,0,0),n=a.content.filter(t=>{var a;return(null===(a=t.created_by)||void 0===a?void 0:a.includes("ai"))&&t.created_at>=e}),d=a.content.filter(e=>e.ai_confidence>=.8),s=a.content.length>0?a.content.reduce((e,t)=>e+(t.ai_confidence||0),0)/a.content.length:0;b({ai_generated_today:n.length,high_confidence_pending:d.length,auto_approved_today:0,avg_confidence:s})}}catch(e){t([{id:"demo-ai-1",title:"AI: Nov\xe9 \xfapravy ve Vinohradech",content:"Tento čl\xe1nek byl automaticky vygenerov\xe1n AI syst\xe9mem na z\xe1kladě aktu\xe1ln\xedch dat z Prahy...",category:"local",neighborhood_id:"vinohrady",ai_confidence:.87,status:"ai_generated",created_by:"ai-generate-claude",created_at:Date.now()-36e5}]),b({ai_generated_today:5,high_confidence_pending:3,auto_approved_today:2,avg_confidence:.82})}finally{c(!1)}})()},[]);let g=async e=>{c(!0);try{(await fetch("https://content-approve.jhaladik.workers.dev",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e,action:"approve",approved_by:"admin"})})).ok?(t(t=>t.filter(t=>t.id!==e)),h("✅ Obsah schv\xe1len a publikov\xe1n")):h("❌ Chyba při schvalov\xe1n\xed")}catch(e){h("❌ S\xedťov\xe1 chyba")}c(!1)},u=async e=>{c(!0);try{(await fetch("https://content-approve.jhaladik.workers.dev",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e,action:"reject",approved_by:"admin"})})).ok?(t(t=>t.filter(t=>t.id!==e)),h("❌ Obsah zam\xedtnut")):h("❌ Chyba při zam\xedt\xe1n\xed")}catch(e){h("❌ S\xedťov\xe1 chyba")}c(!1)},p=async()=>{if(0!==a.length){c(!0);try{(await fetch("https://content-batch-approve.jhaladik.workers.dev",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"approve",content_ids:a,approved_by:"admin"})})).ok?(t(e=>e.filter(e=>!a.includes(e.id))),d([]),h("✅ ".concat(a.length," čl\xe1nků schv\xe1leno"))):h("❌ Chyba při hromadn\xe9m schvalov\xe1n\xed")}catch(e){h("❌ S\xedťov\xe1 chyba")}c(!1)}},m=async()=>{c(!0);try{let e=await fetch("https://content-auto-approve.jhaladik.workers.dev",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({threshold:.85,max_items:10,dry_run:!1})});if(e.ok){let t=await e.json();h("✅ Auto-schv\xe1len\xed: ".concat(t.approved," čl\xe1nků schv\xe1leno")),window.location.reload()}else h("❌ Chyba při auto-schv\xe1len\xed")}catch(e){h("❌ S\xedťov\xe1 chyba")}c(!1)},v=e=>({emergency:"bg-red-100 text-red-800 border-red-300",local:"bg-blue-100 text-blue-800 border-blue-300",business:"bg-green-100 text-green-800 border-green-300",community:"bg-yellow-100 text-yellow-800 border-yellow-300",weather:"bg-purple-100 text-purple-800 border-purple-300",transport:"bg-orange-100 text-orange-800 border-orange-300"})[e]||"bg-gray-100 text-gray-800 border-gray-300",y=e=>e>=.9?"text-green-600 bg-green-50":e>=.8?"text-green-500 bg-green-50":e>=.7?"text-yellow-600 bg-yellow-50":e>=.6?"text-orange-600 bg-orange-50":"text-red-600 bg-red-50",j=e=>(null==e?void 0:e.includes("ai-generate"))?"\uD83E\uDD16 AI Gener\xe1tor":(null==e?void 0:e.includes("ai"))?"\uD83E\uDD16 AI":e||"Manu\xe1ln\xed";return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s(),{children:(0,n.jsx)("title",{children:"Admin Dashboard - M\xedstn\xed Zpr\xe1vy"})}),(0,n.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,n.jsx)("header",{className:"bg-white shadow",children:(0,n.jsxs)("div",{className:"container mx-auto px-4 py-6",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"\uD83D\uDCCB Admin Dashboard"}),(0,n.jsx)("p",{className:"text-gray-600",children:"Spr\xe1va obsahu - Review Queue"})]}),(0,n.jsxs)("div",{className:"flex gap-4",children:[(0,n.jsx)(i(),{href:"/admin/ai-dashboard",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"\uD83E\uDD16 AI Dashboard"}),(0,n.jsx)(i(),{href:"/",className:"px-4 py-2 bg-gray-600 text-white rounded hover:bg-gray-700",children:"\uD83C\uDFE0 Domů"})]})]}),(0,n.jsxs)("div",{className:"mt-4 grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,n.jsxs)("div",{className:"text-center p-3 bg-blue-50 rounded-lg border border-blue-200",children:[(0,n.jsx)("div",{className:"text-xl font-bold text-blue-600",children:e.length}),(0,n.jsx)("div",{className:"text-sm text-blue-700",children:"Ček\xe1 na schv\xe1len\xed"})]}),(0,n.jsxs)("div",{className:"text-center p-3 bg-green-50 rounded-lg border border-green-200",children:[(0,n.jsx)("div",{className:"text-xl font-bold text-green-600",children:x.high_confidence_pending}),(0,n.jsx)("div",{className:"text-sm text-green-700",children:"Vysok\xe1 AI důvěra"})]}),(0,n.jsxs)("div",{className:"text-center p-3 bg-purple-50 rounded-lg border border-purple-200",children:[(0,n.jsx)("div",{className:"text-xl font-bold text-purple-600",children:x.ai_generated_today}),(0,n.jsx)("div",{className:"text-sm text-purple-700",children:"AI dnes"})]}),(0,n.jsxs)("div",{className:"text-center p-3 bg-yellow-50 rounded-lg border border-yellow-200",children:[(0,n.jsx)("div",{className:"text-xl font-bold text-yellow-600",children:x.avg_confidence.toFixed(2)}),(0,n.jsx)("div",{className:"text-sm text-yellow-700",children:"Průměrn\xe1 důvěra"})]})]})]})}),(0,n.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[o&&(0,n.jsx)("div",{className:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:(0,n.jsx)("p",{className:"text-blue-800",children:o})}),(0,n.jsxs)("div",{className:"mb-6 grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,n.jsx)("button",{onClick:m,disabled:r,className:"px-4 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50",children:"⚡ Auto-schv\xe1lit vysokou důvěru (≥0.85)"}),(0,n.jsxs)("button",{onClick:p,disabled:r||0===a.length,className:"px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:["✅ Schv\xe1lit vybran\xe9 (",a.length,")"]}),(0,n.jsx)("button",{onClick:()=>d([]),disabled:0===a.length,className:"px-4 py-3 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 disabled:opacity-50",children:"\uD83D\uDD04 Zrušit v\xfdběr"})]}),r&&0===e.length?(0,n.jsxs)("div",{className:"bg-white rounded-lg shadow p-8 text-center",children:[(0,n.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,n.jsx)("p",{className:"text-gray-500",children:"Nač\xedt\xe1n\xed review queue..."})]}):0===e.length?(0,n.jsxs)("div",{className:"bg-white rounded-lg shadow p-8 text-center",children:[(0,n.jsx)("p",{className:"text-gray-500",children:"\uD83C\uDF89 Ž\xe1dn\xe9 čl\xe1nky nečekaj\xed na schv\xe1len\xed!"}),(0,n.jsx)(i(),{href:"/admin/ai-dashboard",className:"mt-4 inline-block px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"\uD83E\uDD16 Přej\xedt na AI Dashboard"})]}):(0,n.jsx)("div",{className:"space-y-4",children:e.map(e=>(0,n.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,n.jsxs)("div",{className:"flex items-start justify-between",children:[(0,n.jsxs)("div",{className:"flex items-start space-x-4 flex-1",children:[(0,n.jsx)("input",{type:"checkbox",checked:a.includes(e.id),onChange:t=>{t.target.checked?d([...a,e.id]):d(a.filter(t=>t!==e.id))},className:"mt-1 h-4 w-4 text-blue-600"}),(0,n.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,n.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:e.title}),(0,n.jsx)("span",{className:"px-2 py-1 text-xs rounded border ".concat(v(e.category)),children:e.category}),(0,n.jsx)("span",{className:"px-2 py-1 text-xs bg-gray-100 text-gray-600 rounded",children:e.neighborhood_id})]}),(0,n.jsx)("p",{className:"text-gray-600 mb-3 line-clamp-3",children:e.content}),(0,n.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[(0,n.jsx)("span",{children:j(e.created_by)}),(0,n.jsx)("span",{children:new Date(e.created_at).toLocaleString("cs-CZ")}),e.ai_confidence>0&&(0,n.jsxs)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(y(e.ai_confidence)),children:["\uD83C\uDFAF ",(100*e.ai_confidence).toFixed(0),"% důvěra"]})]})]})]}),(0,n.jsxs)("div",{className:"flex gap-2 ml-4",children:[(0,n.jsx)("button",{onClick:()=>g(e.id),disabled:r,className:"px-3 py-2 bg-green-600 text-white rounded hover:bg-green-700 disabled:opacity-50",children:"✅ Schv\xe1lit"}),(0,n.jsx)("button",{onClick:()=>u(e.id),disabled:r,className:"px-3 py-2 bg-red-600 text-white rounded hover:bg-red-700 disabled:opacity-50",children:"❌ Zam\xedtnout"})]})]})},e.id))}),(0,n.jsxs)("div",{className:"mt-8 bg-white rounded-lg shadow p-6",children:[(0,n.jsx)("h3",{className:"text-lg font-bold mb-4",children:"➕ Rychl\xe9 vytvořen\xed obsahu"}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h4",{className:"font-medium mb-2",children:"\uD83E\uDD16 AI Generov\xe1n\xed"}),(0,n.jsx)(i(),{href:"/admin/ai-dashboard?tab=generation",className:"block px-4 py-3 bg-blue-100 text-blue-800 rounded hover:bg-blue-200 text-center",children:"Generovat AI obsah"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h4",{className:"font-medium mb-2",children:"✍️ Manu\xe1ln\xed vytvořen\xed"}),(0,n.jsx)(i(),{href:"/admin/content/create",className:"block px-4 py-3 bg-green-100 text-green-800 rounded hover:bg-green-200 text-center",children:"Vytvořit manu\xe1lně"})]})]})]})]})]})]})}}},function(e){e.O(0,[996,888,774,179],function(){return e(e.s=2599)}),_N_E=e.O()}]);