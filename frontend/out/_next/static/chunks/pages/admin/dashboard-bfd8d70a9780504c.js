(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[189],{2599:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/dashboard",function(){return a(3498)}])},3498:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return AdminDashboard}});var r=a(5893),n=a(9008),s=a.n(n),d=a(7294);function AdminDashboard(){let[e,t]=(0,d.useState)([]),[a,n]=(0,d.useState)([]),[l,i]=(0,d.useState)(!0),[o,c]=(0,d.useState)("");(0,d.useEffect)(()=>{let loadReviewQueue=async()=>{try{let e=await fetch("".concat("https://admin-review-queue.jhaladik.workers.dev","/?status=draft")),a=await e.json();t(a.items||[])}catch(e){console.error("Error loading review queue:",e),t([{id:"demo-admin-1",title:"Demo čl\xe1nek čekaj\xedc\xed na schv\xe1len\xed",content:"Toto je uk\xe1zkov\xfd čl\xe1nek v admin dashboard. Workers jsou připojen\xe9 a funkčn\xed.",category:"local",neighborhood:{id:"vinohrady",name:"Vinohrady"},ai_confidence:.85,status:"draft",created_by:"demo",created_at:Date.now()-36e5,priority:"normal"}])}finally{i(!1)}};loadReviewQueue()},[]);let handleApprove=async e=>{i(!0);try{let a=await fetch("https://content-approve.jhaladik.workers.dev",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e,action:"approve",approved_by:"admin"})});a.ok?(t(t=>t.filter(t=>t.id!==e)),c("✅ Obsah schv\xe1len a publikov\xe1n")):c("❌ Chyba při schvalov\xe1n\xed")}catch(e){c("❌ S\xedťov\xe1 chyba")}i(!1)},handleReject=async e=>{i(!0);try{let a=await fetch("https://content-approve.jhaladik.workers.dev",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e,action:"reject",approved_by:"admin"})});a.ok?(t(t=>t.filter(t=>t.id!==e)),c("❌ Obsah zam\xedtnut")):c("❌ Chyba při zam\xedt\xe1n\xed")}catch(e){c("❌ S\xedťov\xe1 chyba")}i(!1)},handleBatchApprove=async()=>{if(0===a.length)return;i(!0);let e=a.map(e=>fetch("https://content-approve.jhaladik.workers.dev",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e,action:"approve",approved_by:"admin"})}));try{await Promise.all(e),t(e=>e.filter(e=>!a.includes(e.id))),n([]),c("✅ ".concat(a.length," čl\xe1nků schv\xe1leno"))}catch(e){c("❌ Chyba při hromadn\xe9m schvalov\xe1n\xed")}i(!1)},getCategoryColor=e=>{switch(e){case"emergency":return"bg-red-100 text-red-800 border-red-300";case"local":return"bg-blue-100 text-blue-800 border-blue-300";case"business":return"bg-green-100 text-green-800 border-green-300";case"community":return"bg-yellow-100 text-yellow-800 border-yellow-300";default:return"bg-gray-100 text-gray-800 border-gray-300"}},getPriorityColor=e=>"high"===e?"border-l-4 border-red-500":"border-l-4 border-blue-500";return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s(),{children:(0,r.jsx)("title",{children:"Admin Dashboard - M\xedstn\xed Zpr\xe1vy"})}),(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,r.jsx)("header",{className:"bg-white shadow",children:(0,r.jsx)("div",{className:"container mx-auto px-4 py-6",children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"\uD83E\uDD16 Admin Dashboard"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Spr\xe1va obsahu - M\xedstn\xed Zpr\xe1vy"})]}),(0,r.jsxs)("div",{className:"flex gap-4",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:e.length}),(0,r.jsx)("div",{className:"text-sm text-gray-500",children:"Ček\xe1 na schv\xe1len\xed"})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-green-600",children:e.filter(e=>e.ai_confidence>.8).length}),(0,r.jsx)("div",{className:"text-sm text-gray-500",children:"Vysok\xe1 AI důvěra"})]})]})]})})}),(0,r.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[o&&(0,r.jsx)("div",{className:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:(0,r.jsx)("p",{className:"text-blue-800",children:o})}),a.length>0&&(0,r.jsx)("div",{className:"mb-6 p-4 bg-white rounded-lg shadow",children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("span",{className:"text-sm text-gray-600",children:["Vybr\xe1no: ",a.length," čl\xe1nků"]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("button",{onClick:handleBatchApprove,disabled:l,className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 disabled:opacity-50",children:"✅ Schv\xe1lit vybran\xe9"}),(0,r.jsx)("button",{onClick:()=>n([]),className:"px-4 py-2 bg-gray-300 text-gray-700 rounded hover:bg-gray-400",children:"Zrušit v\xfdběr"})]})]})}),l&&0===e.length?(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow p-8 text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,r.jsx)("p",{className:"text-gray-500",children:"Nač\xedt\xe1n\xed review queue..."})]}):(0,r.jsx)("div",{className:"space-y-4",children:0===e.length?(0,r.jsx)("div",{className:"bg-white rounded-lg shadow p-8 text-center",children:(0,r.jsx)("p",{className:"text-gray-500",children:"\uD83C\uDF89 Ž\xe1dn\xe9 čl\xe1nky nečekaj\xed na schv\xe1len\xed!"})}):e.map(e=>(0,r.jsx)("div",{className:"bg-white rounded-lg shadow ".concat(getPriorityColor(e.priority)),children:(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("input",{type:"checkbox",checked:a.includes(e.id),onChange:t=>{t.target.checked?n([...a,e.id]):n(a.filter(t=>t!==e.id))},className:"w-4 h-4"}),(0,r.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-medium border ".concat(getCategoryColor(e.category)),children:e.category.toUpperCase()}),(0,r.jsx)("span",{className:"text-sm text-gray-500",children:e.neighborhood.name}),"high"===e.priority&&(0,r.jsx)("span",{className:"px-2 py-1 bg-red-100 text-red-800 text-xs font-bold rounded",children:"URGENTN\xcd"})]}),(0,r.jsxs)("div",{className:"text-right text-sm text-gray-500",children:[(0,r.jsxs)("div",{children:["Vytvořeno: ",new Date(e.created_at).toLocaleString("cs-CZ")]}),(0,r.jsxs)("div",{children:["Autor: ",e.created_by]}),e.ai_confidence>0&&(0,r.jsxs)("div",{className:"font-medium ".concat(e.ai_confidence>.8?"text-green-600":e.ai_confidence>.6?"text-yellow-600":"text-red-600"),children:["AI Confidence: ",Math.round(100*e.ai_confidence),"%"]})]})]}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:e.title}),(0,r.jsx)("div",{className:"text-gray-700 prose prose-sm max-w-none",children:e.content.split("\n").map((e,t)=>(0,r.jsx)("p",{className:"mb-2",children:e},t))})]}),(0,r.jsxs)("div",{className:"flex gap-3",children:[(0,r.jsx)("button",{onClick:()=>handleApprove(e.id),disabled:l,className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 disabled:opacity-50 transition-colors",children:"✅ Schv\xe1lit"}),(0,r.jsx)("button",{onClick:()=>handleReject(e.id),disabled:l,className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 disabled:opacity-50 transition-colors",children:"❌ Zam\xedtnout"}),(0,r.jsx)("button",{disabled:l,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50 transition-colors",children:"✏️ Upravit"}),(0,r.jsx)("button",{disabled:l,className:"px-4 py-2 bg-gray-300 text-gray-700 rounded hover:bg-gray-400 disabled:opacity-50 transition-colors",children:"\uD83D\uDD0D Detail"})]})]})},e.id))}),(0,r.jsx)("div",{className:"mt-8",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-bold mb-4",children:"➕ Rychl\xe9 vytvořen\xed obsahu"}),(0,r.jsx)(CreateContentForm,{onContentCreated:()=>window.location.reload()})]})})]})]})]})}function CreateContentForm(e){let{onContentCreated:t}=e,[a,n]=(0,d.useState)({title:"",content:"",category:"local",neighborhood_id:"vinohrady"}),[s,l]=(0,d.useState)(!1),handleSubmit=async e=>{e.preventDefault(),l(!0);try{let e=await fetch("https://content-create.jhaladik.workers.dev",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...a,created_by:"admin"})});e.ok&&(n({title:"",content:"",category:"local",neighborhood_id:"vinohrady"}),t())}catch(e){console.error("Error creating content:",e)}l(!1)};return(0,r.jsxs)("form",{onSubmit:handleSubmit,className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Kategorie"}),(0,r.jsxs)("select",{value:a.category,onChange:e=>n({...a,category:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:[(0,r.jsx)("option",{value:"emergency",children:"\uD83D\uDEA8 Emergency"}),(0,r.jsx)("option",{value:"local",children:"\uD83D\uDCCD Local"}),(0,r.jsx)("option",{value:"business",children:"\uD83C\uDFEA Business"}),(0,r.jsx)("option",{value:"community",children:"\uD83E\uDD1D Community"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Čtvrť"}),(0,r.jsxs)("select",{value:a.neighborhood_id,onChange:e=>n({...a,neighborhood_id:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:[(0,r.jsx)("option",{value:"vinohrady",children:"Vinohrady"}),(0,r.jsx)("option",{value:"karlin",children:"Karl\xedn"}),(0,r.jsx)("option",{value:"smichov",children:"Sm\xedchov"}),(0,r.jsx)("option",{value:"zizkov",children:"Žižkov"})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nadpis"}),(0,r.jsx)("input",{type:"text",value:a.title,onChange:e=>n({...a,title:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"Nadpis čl\xe1nku...",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Obsah"}),(0,r.jsx)("textarea",{value:a.content,onChange:e=>n({...a,content:e.target.value}),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"Obsah čl\xe1nku...",required:!0})]}),(0,r.jsx)("button",{type:"submit",disabled:s,className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",children:s?"Vytv\xe1ř\xed se...":"\uD83D\uDCBE Vytvořit čl\xe1nek"})]})}},9008:function(e,t,a){e.exports=a(9201)}},function(e){e.O(0,[774,888,179],function(){return e(e.s=2599)}),_N_E=e.O()}]);